# nkuwiki å¼€æºÂ·å…±æ²»Â·æ™®æƒ çš„å—å¼€ç™¾ç§‘

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)[![Version](https://img.shields.io/badge/version-0.1.0-blue.svg)](https://github.com/your-org/nkuwiki/releases)

## ğŸš€ ç«‹å³ä½“éªŒ

- ğŸ”— [ç½‘ç«™](https://coze.nankai.edu.cn/product/llm/chat/cuh2gospkp8br093l2eg)
- ğŸ” å¾®ä¿¡æœåŠ¡å·ï¼šnkuwikiçŸ¥è¯†ç¤¾åŒºï¼ˆæ— é™åˆ¶ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½ï¼‰
- ğŸ—ï¸ å¾®ä¿¡è®¢é˜…å· nkuwikiï¼ˆæœ‰æ¶ˆæå›å¤é™åˆ¶ï¼‰

## ğŸ“‡ ç›®å½•

- [nkuwiki å¼€æºÂ·å…±æ²»Â·æ™®æƒ çš„å—å¼€ç™¾ç§‘](#nkuwiki-å¼€æºå…±æ²»æ™®æƒ çš„å—å¼€ç™¾ç§‘)
  - [ğŸš€ ç«‹å³ä½“éªŒ](#-ç«‹å³ä½“éªŒ)
  - [ğŸ“‡ ç›®å½•](#-ç›®å½•)
  - [ğŸ¯ æ„¿æ™¯ä¸ç›®æ ‡](#-æ„¿æ™¯ä¸ç›®æ ‡)
  - [ğŸ¤ å¦‚ä½•å‚ä¸](#-å¦‚ä½•å‚ä¸)
  - [ğŸ— ç³»ç»Ÿæ¶æ„å›¾](#-ç³»ç»Ÿæ¶æ„å›¾)
  - [ğŸ“… æ¼”è¿›è·¯çº¿](#-æ¼”è¿›è·¯çº¿)
  - [ğŸ’» æŠ€æœ¯å®ç°](#-æŠ€æœ¯å®ç°)
    - [é¡¹ç›®ç»“æ„æ ‘](#é¡¹ç›®ç»“æ„æ ‘)
    - [æŠ€æœ¯é€‰å‹è¡¨](#æŠ€æœ¯é€‰å‹è¡¨)
    - [æ ¸å¿ƒæ¨¡å—å®ç°](#æ ¸å¿ƒæ¨¡å—å®ç°)
      - [çˆ¬è™«æ··åˆæ¶æ„å®ç°æ–¹æ¡ˆ](#çˆ¬è™«æ··åˆæ¶æ„å®ç°æ–¹æ¡ˆ)
      - [çŸ¥è¯†åº“å…¥åº“æµç¨‹](#çŸ¥è¯†åº“å…¥åº“æµç¨‹)
      - [ç”¨æˆ·è´¡çŒ®ç®¡é“](#ç”¨æˆ·è´¡çŒ®ç®¡é“)
      - [agentäº¤äº’æ¶æ„](#agentäº¤äº’æ¶æ„)
      - [webæœåŠ¡æ¶æ„](#webæœåŠ¡æ¶æ„)
    - [éƒ¨ç½²è§„èŒƒ](#éƒ¨ç½²è§„èŒƒ)
  - [ğŸ“š æ–‡æ¡£ç»´æŠ¤](#-æ–‡æ¡£ç»´æŠ¤)

## ğŸ¯ æ„¿æ™¯ä¸ç›®æ ‡

æˆ‘ä»¬è‡´åŠ›äºæ„å»º**å—å¼€çŸ¥è¯†å…±åŒä½“**ï¼Œè·µè¡Œ **å¼€æºÂ·å…±æ²»Â·æ™®æƒ ** ä¸‰ä½ä¸€ä½“ä»·å€¼ä½“ç³»  
  ï¼ˆğŸ”“ æŠ€æœ¯å¼€æºé€æ˜ + ğŸ¤ ç¤¾åŒºååŒå…±æ²» + ğŸ†“ æœåŠ¡æ°¸ä¹…æ™®æƒ ï¼‰ï¼Œå®ç°ï¼š

- ğŸš€ **æ¶ˆé™¤å—å¼€å­¦å­ä¿¡æ¯å·®è·**
- ğŸ’¡ **å¼€æ”¾çŸ¥è¯†èµ„æºå…è´¹è·å–**
- ğŸŒ± **æ„å»ºå¯æŒç»­çš„äº’åŠ©ç¤¾åŒº**

**é¡¹ç›®äº®ç‚¹**ï¼š

- ğŸ¤– **å¼€æºçŸ¥è¯†ä¸­æ¢**
  - ğŸ§  åŒæ“é©±åŠ¨ï¼š**RAG**æ¡†æ¶ + **SOTA**æ¨¡å‹æ¨ç†
  - ğŸ”„ **åŠ¨æ€çŸ¥è¯†å›¾è°±**
    - ğŸ”“ æ¥å…¥**å—å¼€å…¨æ¸ é“æ•°æ®æº**ï¼ˆç½‘ç«™/å¾®ä¿¡å…¬ä¼—å·/æ ¡å›­é›†å¸‚/å°çº¢ä¹¦/å¾®åš/æŠ–éŸ³/Bç«™/çŸ¥ä¹etc.ï¼‰
    - ğŸ¤ **ç¤¾åŒºå…±æ²»**ï¼šå¿—æ„¿è€…å›¢é˜Ÿä¸ç”¨æˆ·ååŒç»´æŠ¤
    - ğŸ›¡ï¸ **å¼€æºè¯„ä¼°æ¡†æ¶**ï¼ˆè´¡çŒ®è€…é€æ˜å®¡è®¡ï¼‰
  - ğŸ” å¤šæ¨¡æ€å’Œä¸°å¯Œæ’ä»¶æ”¯æŒ
    - æ”¯æŒæ–‡æœ¬/è¯­éŸ³/å›¾åƒ/è§†é¢‘å…¨æ„Ÿå®˜çŸ¥è¯†è·å–
    - ä¸°å¯Œæ’ä»¶æ”¯æŒï¼šæœç´¢å¼•æ“ã€åˆ›æ„ç”Ÿå›¾ã€æ•°æ®åˆ†æetc.
- ğŸ‘¥ **æ™®æƒ å…±æ²»æœºåˆ¶**
  - ä¸‰ç»´ååŒæ¶æ„ï¼š
    - ğŸ’» **æŠ€æœ¯å±‚**ï¼šå¼€æºç¤¾åŒºç»´æŠ¤æ ¸å¿ƒæ ˆ
    - âš–ï¸ **æ²»ç†å±‚**ï¼šDAOå¼å†…å®¹å®¡æ ¸å§”å‘˜ä¼š
    - ğŸ‘¤ **åº”ç”¨å±‚**ï¼šè´¡çŒ®å³æ²»ç†ï¼ˆ1Token=1æŠ•ç¥¨æƒï¼‰
- ğŸ’ **è´¡çŒ®æµé€šç³»ç»Ÿ**ï¼š
  - ğŸ **æ¿€åŠ±å…¨å‘¨æœŸè¦†ç›–**ï¼ˆé‡‡é›†/æ¸…æ´—/æ ‡æ³¨ï¼‰
  - â™»ï¸ **æ•°å­—æƒç›Šå…‘æ¢**ï¼š
    - âš¡ ä¼˜å…ˆè®¡ç®—èµ„æº
    - ğŸšï¸ ä¸ªæ€§åŒ–çŸ¥è¯†é—¨æˆ·
    - ğŸ—³ï¸ æ²»ç†ä»£è®®å¸­ä½

  ## ğŸ¤ å¦‚ä½•å‚ä¸

  â­ **è”ç³»æ–¹å¼**ï¼šæ‚¨å¯ä»¥ç›´æ¥æ·»åŠ å¾®ä¿¡ `ao_kimi` ï¼Œé£ä¹¦è”ç³» @å»–æœ›ï¼Œæˆ–è€…è”ç³»å¼€å‘å›¢é˜Ÿä¸å¿—æ„¿è€…å›¢é˜Ÿä»»æ„æˆå‘˜ã€‚

  ğŸŒ± **ä½¿ç”¨å³è´¡çŒ®ï¼Œè´¡çŒ®å³æ²»ç†**ï¼šæ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨æˆ‘ä»¬çš„æœåŠ¡ï¼Œè”ç³»æˆ‘ä»¬åé¦ˆæ‚¨çš„å®è´µæ„è§ï¼Œå‘æœ‹å‹å®‰åˆ©æˆ‘ä»¬çš„æœåŠ¡ï¼Œä¸Šä¼ æ‚¨è®¤ä¸ºæœ‰ä»·å€¼çš„èµ„æ–™ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®æissueæˆ–PRï¼Œæˆ–è€…ç›´æ¥åŠ å…¥å¼€å‘å›¢é˜Ÿä¸å¿—æ„¿è€…å›¢é˜Ÿç­‰å¤šç§æ–¹å¼ä¸ºç¤¾åŒºå‘å±•ä½œå‡ºè´¡çŒ®ã€‚æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼ï¼Œä¸è®¡å¤§å°çš„è´¡çŒ®ï¼

ç°ä»»å¼€å‘å›¢é˜Ÿ

- [@aokimi0](https://github.com/aokimi0)
- [@LiaojunChen](https://github.com/LiaojunChen)
- [@hht421](https://github.com/hht421)
- [@ym-guan](https://github.com/ym-guan)
- [@Yiwenjia1](https://github.com/Yiwenjia1)

ç°ä»»å¿—æ„¿è€…å›¢é˜Ÿ

- [@aokimi0](https://github.com/aokimi0)
- [@hht421](https://github.com/hht421)
- .[@hengdaoye50](https://github.com/hengdaoye50)

## ğŸ— ç³»ç»Ÿæ¶æ„å›¾

![ç³»ç»Ÿæ¶æ„å›¾](./docs/assets/ç³»ç»Ÿæ¶æ„å›¾.png)

## ğŸ“… æ¼”è¿›è·¯çº¿

| é˜¶æ®µ             | å…³é”®é‡Œç¨‹ç¢‘                          | æŠ€æœ¯æ ˆä¸æ¶æ„å†³ç­–                     | äº¤ä»˜äº§ç‰©                          |
|------------------|-------------------------------------|--------------------------------------|-----------------------------------|
| **MVPå¯åŠ¨æœŸ**    | âœ… æ ¸å¿ƒæœåŠ¡ä¸Šçº¿                      | ğŸ›  FastAPIï¼ˆAPIç½‘å…³ï¼‰                | ğŸ“¦ å®¹å™¨åŒ–æ ¸å¿ƒæœåŠ¡                 |
| (0-3æœˆ)          | â–ª å¾®ä¿¡å…¬ä¼—å·æ™ºèƒ½é—®ç­”MVP             | ğŸ¤– Cozeï¼ˆæ™ºèƒ½Agentï¼‰                  | ğŸ“š éƒ¨ç½²æŒ‡å—+è¿ç»´æ‰‹å†Œ              |
|                  | â–ª åŠ¨æ€çˆ¬è™«æ¡†æ¶1.0                   | ğŸ•· Playwrightï¼ˆè‡ªåŠ¨åŒ–çˆ¬è™«ï¼‰ | ğŸ” çŸ¥è¯†åº“æ£€ç´¢APIæ–‡æ¡£              |
|                  | â–ª é‡ç‚¹å¹³å°æ•°æ®æ¥å…¥ï¼ˆå®˜ç½‘/å…¬ä¼—å·ï¼‰     |                                      |                                   |
|                  | â–ª çŸ¥è¯†åº“åŸºç¡€æ£€ç´¢åŠŸèƒ½                 |                                      |                                   |
| **ç”Ÿæ€æ„å»ºæœŸ**   | ğŸš€ æ ¸å¿ƒç³»ç»Ÿæ‰©å±•                      | ğŸ•¸ Scrapyï¼ˆåˆ†å¸ƒå¼çˆ¬è™«ï¼‰             | ğŸ§© å¯æ’æ‹”çˆ¬è™«æ¡†æ¶                |
| (4-6æœˆ)          | â–ª å…¨å¹³å°çˆ¬è™«è¦†ç›–                    | ğŸ“Š Prometheus+Granfanaï¼ˆç›‘æ§ï¼‰      | ğŸ“ˆ è´¨é‡è¯„ä¼°ç³»ç»Ÿ                  |
|                  | â–ª æ•°æ®è´¨é‡çœ‹æ¿1.0                   | ğŸ” JWT+RBACï¼ˆæƒé™æ§åˆ¶ï¼‰             | ğŸª™ Tokenæ¿€åŠ±åŸå‹ç³»ç»Ÿ             |
|                  | â–ª ç”¨æˆ·è´¡çŒ®ç³»ç»ŸåŸå‹                  |                                      |                                   |
|                  | â–ª åçˆ¬ç­–ç•¥å¢å¼º                      |                                      |                                   |
| **ä½“ç³»å‡çº§æœŸ**   | ğŸŒŸ ç³»ç»Ÿæ¶æ„æ¼”è¿›                      | â˜ Spring Cloud Alibabaï¼ˆå¾®æœåŠ¡ï¼‰   | ğŸ”„ ç§¯åˆ†ç³»ç»Ÿå¾®æœåŠ¡é›†ç¾¤            |
| (7-9æœˆ)          | â–ª å¾®æœåŠ¡åŒ–æ”¹é€                       | ğŸ“¦ ELKï¼ˆæ—¥å¿—åˆ†æï¼‰                  | ğŸ‘ï¸ ç³»ç»Ÿå¥åº·çœ‹æ¿                 |
|                  | â–ª åˆ†å¸ƒå¼ç§¯åˆ†ç³»ç»Ÿ                    | ğŸ§  Milvusï¼ˆå‘é‡æ£€ç´¢ï¼‰               | ğŸ¨ å¤šæ¨¡æ€å¤„ç†SDK                |
|                  | â–ª å…¨é“¾è·¯ç›‘æ§ä½“ç³»                    |                                      |                                   |
|                  | â–ª å¤šæ¨¡æ€çŸ¥è¯†å¼•æ“                    |                                      |                                   |

**å°å›¢é˜Ÿæ¼”è¿›ç­–ç•¥**ï¼š

1. ğŸ¯ åŠŸèƒ½ä¼˜å…ˆçº§ï¼šé‡‡ç”¨ã€Œå‰ƒåˆ€åŸåˆ™ã€èšç„¦æ ¸å¿ƒåœºæ™¯ï¼Œé¦–æœŸä»…ä¿ç•™é—®ç­”/æ£€ç´¢/åŸºç¡€çˆ¬è™«åŠŸèƒ½
2. ğŸ§ª éªŒè¯é©±åŠ¨ï¼šTokenæœºåˆ¶å…ˆå®ç°ç®€å•ç§¯åˆ†å‘æ”¾ï¼ŒäºŒæœŸå†å¼•å…¥å…‘æ¢/æ¶ˆè´¹é—­ç¯
3. ğŸ“¶ æ¸è¿›æ¥å…¥ï¼šå¹³å°æ¥å…¥æŒ‰ã€Œå®˜ç½‘â†’å…¬ä¼—å·â†’æ ¡å›­é›†å¸‚â†’ç¤¾äº¤å¹³å°ã€é¡ºåºåˆ†é˜¶æ®µå®æ–½
4. ğŸš§ æ¶æ„æ¼”è¿›ï¼šä»å•ä½“â†’æ¨¡å—åŒ–â†’å¾®æœåŠ¡æ¸è¿›å¼æ”¹é€ ï¼Œé¿å…æ—©æœŸè¿‡åº¦è®¾è®¡

## ğŸ’» æŠ€æœ¯å®ç°

### é¡¹ç›®ç»“æ„æ ‘

```plaintext
nkuwiki/
â”œâ”€â”€ core/               # æ ¸å¿ƒ
â”‚   â”œâ”€â”€ agent/          # Agentæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ chatgpt/          # ChatGPTå¹³å°é›†æˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ chat_gpt_agent.py     # Agentå®ç°
â”‚   â”‚   â”‚   â””â”€â”€ chat_gpt_session.py   # ä¼šè¯ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ coze/          # Cozeå¹³å°é›†æˆ
â”‚   â”‚   â”‚   â””â”€â”€ coze_agent.py     # Agentå®ç°
â”‚   â”‚   â”œâ”€â”€ hiagent/        # HIAgentå¹³å°
â”‚   â”‚   â”‚    â”œâ”€â”€ hiagent_agent.py    
â”‚   â”‚   â”‚    â””â”€â”€ hiagent_session.py   # ä¼šè¯ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ agent.py          # AgentæŠ½è±¡åŸºç±»
â”‚   â”‚   â”œâ”€â”€ session_manager.py # å…¨å±€ä¼šè¯ç®¡ç†
â”‚   â”‚   â””â”€â”€ agent_factory.py  # Agentå·¥å‚
â”‚   â”œâ”€â”€ bridge/          # è¿æ¥agentå’ŒæœåŠ¡çš„æ¡¥æ¢
â”‚   â”‚   â”œâ”€â”€ bridge.py  # æ¡¥æ¢
â”‚   â”‚   â”‚   â”œâ”€â”€ context.py # ä¸Šä¸‹æ–‡
â”‚   â”‚   â”‚   â”œâ”€â”€ reply.py # å›å¤
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ auth/          # è®¤è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ duckdb_operator.py  # DuckDBæ“ä½œ
â”‚   â”‚   â””â”€â”€ redis_manager.py    # Redisè¿æ¥ç®¡ç†
â”‚   â””â”€â”€ utils/         # å…¬å…±å·¥å…·åº“
â”‚       â”œâ”€â”€ common/        # é€šç”¨å·¥å…·
â”‚       â”‚   â”œâ”€â”€ expired_dict.py  # å¸¦è¿‡æœŸå­—å…¸
â”‚       â”‚   â”œâ”€â”€ string_utils.py   # å­—ç¬¦ä¸²å¤„ç†
â”‚       â”‚   â”œâ”€â”€ const.py         # å¸¸é‡å®šä¹‰
â”‚       â”‚   â””â”€â”€ dequeue.py       # åŒç«¯é˜Ÿåˆ—å®ç°
â”‚       â”œâ”€â”€ plugins/       # æ’ä»¶ç³»ç»Ÿ
â”‚       â”‚   â”œâ”€â”€ plugin_manager.py # æ’ä»¶ç®¡ç†å™¨
â”‚       â”‚   â””â”€â”€ ... 
â”‚       â”œâ”€â”€ translate/     # ç¿»è¯‘å·¥å…·
â”‚       â”‚   â”œâ”€â”€ factory.py # ç¿»è¯‘å·¥å‚
â”‚       â”‚   â””â”€â”€ ...
â”‚       â”œâ”€â”€ voice/         # è¯­éŸ³å·¥å…·
â”‚       â”‚   â”œâ”€â”€ factory.py # è¯­éŸ³å·¥å‚
â”‚       â”‚   â””â”€â”€ ...
â”‚       â””â”€â”€ anti_crawler/  # åçˆ¬å·¥å…·
â”‚           â”œâ”€â”€ factory.py # åçˆ¬å·¥å‚
â”‚           â””â”€â”€ ...
â”œâ”€â”€ etl/               # æ•°æ®é‡‡é›†å¤„ç†ç®¡é“
â”‚   â”œâ”€â”€ crawler/       # çˆ¬è™«ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ base_crawler.py  # çˆ¬è™«åŸºç±»
â”‚   â”‚   â”œâ”€â”€ wechat.py        # å¾®ä¿¡å…¬ä¼—å·çˆ¬è™«
â”‚   â”‚   â””â”€â”€ init_script.js   # åæ£€æµ‹è„šæœ¬
â”‚   â””â”€â”€ pipeline/      # æ•°æ®å¤„ç†ç®¡é“
â”‚       â”œâ”€â”€ data_export.py   # æ•°æ®å¯¼å‡ºåˆ°mysql
â”‚       â”œâ”€â”€ merge_json.py    # æ•°æ®åˆå¹¶
â”‚       â””â”€â”€ coze_datasource.py  # CozeçŸ¥è¯†åº“åŒæ­¥
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ terminal/      # ç»ˆç«¯æœåŠ¡
â”‚   â”œâ”€â”€ website/       # ç½‘ç«™æœåŠ¡
â”‚   â”œâ”€â”€ wechatmp/      # å¾®ä¿¡å…¬ä¼—å·æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ wechatmp_channel.py  # ä¸»é€šé“é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ passive_reply.py    # è¢«åŠ¨å›å¤å¤„ç†
â”‚   â”‚   â”œâ”€â”€ active_reply.py     # ä¸»åŠ¨å›å¤å¤„ç† 
â”‚   â”‚   â””â”€â”€ common.py          # å…¬å…±æ–¹æ³•
â”‚   â”œâ”€â”€ chat_channel.py     # é€šç”¨èŠå¤©é€šé“
â”‚   â”œâ”€â”€ chat_message.py     # èŠå¤©æ¶ˆæ¯å¤„ç†
â”‚   â””â”€â”€ channel_factory.py   # é€šé“ç®¡ç†
â””â”€â”€ infra/
    â”œâ”€â”€ deploy/        # éƒ¨ç½²é…ç½®
    â”‚   â””â”€â”€ scripts/    # éƒ¨ç½²è„šæœ¬
    â”‚       â”œâ”€â”€ start.sh     # å¯åŠ¨è„šæœ¬
    â”‚       â”œâ”€â”€ shutdown.sh # å…³é—­è„šæœ¬
    â”‚       â””â”€â”€ restart.sh  # é‡å¯è„šæœ¬
    â””â”€â”€ monitoring/    # ç›‘æ§ä½“ç³»
        â”œâ”€â”€ loki/      # æ—¥å¿—ç®¡ç†
        â””â”€â”€ pyroscope/ # æŒç»­æ€§èƒ½åˆ†æ
â”œâ”€â”€ config.py  # å…¨å±€é…ç½®ç®¡ç†
â”œâ”€â”€ app.py      # å¾®ä¿¡æœåŠ¡å·æœåŠ¡  
â”œâ”€â”€ requirements.txt # ä¾èµ–

/data/                  # æœåŠ¡å™¨æ ¹ç›®å½•ç‹¬ç«‹å­˜å‚¨
â”œâ”€â”€ raw/                # åŸå§‹æ•°æ®
â”‚   â”œâ”€â”€ website/        # ç½‘ç«™
â”‚   â”œâ”€â”€ wechat/         # å¾®ä¿¡å…¬ä¼—å·
â”‚   â”œâ”€â”€ campus_market/  # æ ¡å›­é›†å¸‚
â”‚   â”œâ”€â”€ xiaohongshu/    # å°çº¢ä¹¦
â”‚   â”œâ”€â”€ weibo/          # å¾®åš
â”‚   â”œâ”€â”€ douyin/         # æŠ–éŸ³
â”‚   â”œâ”€â”€ bilibili/       # Bç«™
â”‚   â”œâ”€â”€ zhihu/          # çŸ¥ä¹
â”‚   â”œâ”€â”€ volunteer/      # å¿—æ„¿è€…å›¢é˜Ÿè´¡çŒ®
â”‚   â”œâ”€â”€ user/           # ç”¨æˆ·è´¡çŒ®æ•°æ®
â””â”€â”€ processed/ 
    â”œâ”€â”€ structured/    # ç»“æ„åŒ–æ•°æ®ï¼ˆDuckDBï¼‰
    â””â”€â”€ vector/       # å‘é‡æ•°æ®ï¼ˆCozeåŒæ­¥ï¼‰
```

### æŠ€æœ¯é€‰å‹è¡¨

| æ¨¡å—           | å­æ¨¡å—              | æŠ€æœ¯æ ˆ                                | ç‰ˆæœ¬     | é€‰å‹ä¾æ®                          |
|----------------|-------------------|-------------------------------------|---------|---------------------------------|
| **çˆ¬è™«å¼•æ“**    | æ··åˆé‡‡é›†æ¶æ„       | Playwright + Selenium              | 1.42.0 / 4.18.0 | åŒå¼•æ“è¦†ç›–ç°ä»£SPAä¸ä¼ ç»Ÿç½‘é¡µåœºæ™¯ï¼ŒPlaywrightå¤„ç†å¤æ‚DOMæ€§èƒ½æå‡40% |
|                | åçˆ¬è§£å†³æ–¹æ¡ˆ       | Browserless + mitmproxy            | 2.7.0 / 10.1.0 | åˆ†å¸ƒå¼æµè§ˆå™¨æŒ‡çº¹æ··æ·† + å…¬ä¼—å·APIæµé‡é•œåƒæ•è·èƒ½åŠ› |
| **æ•°æ®æ¸…æ´—**    | æ•°æ®æ¸…æ´—           | Pandera + DuckDB                  | 0.11.0 / 0.9.2 | å£°æ˜å¼æ•°æ®éªŒè¯æ¡†æ¶ + åˆ—å¼å­˜å‚¨å®æ—¶å¤„ç†èƒ½åŠ› |
| **æ¶ˆæ¯é˜Ÿåˆ—**    | ç”¨æˆ·è´¡çŒ®å¤„ç†       | RabbitMQ                           | 3.13.0  | æ”¯æŒAMQP 1.0åè®®ï¼Œæ¶ˆæ¯æŒä¹…åŒ–ä¸æ­»ä¿¡é˜Ÿåˆ—ä¿éšœæ•°æ®å®Œæ•´æ€§ |
| **å­˜å‚¨å±‚**      | å¯¹è±¡å­˜å‚¨           | SeaweedFS                          | 3.64    | å¯¹è±¡å­˜å‚¨ä¸æ–‡ä»¶ç³»ç»Ÿç»Ÿä¸€æ¥å£ï¼Œè‡ªåŠ¨çº åˆ ç æœºåˆ¶ |
|                | å…ƒæ•°æ®å­˜å‚¨         | DuckDB                            | 0.9.2   | æ”¯æŒPythonåŸç”ŸOLAPæŸ¥è¯¢ï¼Œå‘é‡åŒ–æ‰§è¡Œå¼•æ“åŠ é€Ÿ |
| **ä»»åŠ¡è°ƒåº¦**    | åˆ†å¸ƒå¼ä»»åŠ¡         | Celery + Redis                     | 5.3.6 / 7.2.4 | æ”¯æŒä¼˜å…ˆçº§é˜Ÿåˆ—ä¸ä»»åŠ¡çŠ¶æ€è¿½è¸ªï¼ŒRedis Streamsä¿éšœæ¶ˆæ¯å¯é æ€§ |
| **ç›‘æ§ä½“ç³»**    | é“¾è·¯è¿½è¸ª          | OpenTelemetry                     | 1.24.0  | ç»Ÿä¸€è§‚æµ‹æ•°æ®æ ‡å‡†ï¼Œæ”¯æŒMetrics/Logs/Tracesä¸‰æ”¯æŸ± |
| **æ ¸å¿ƒç»„ä»¶**    | APIç½‘å…³           | Apache APISIX                     | 3.8.0   | åŠ¨æ€æ’ä»¶æ¶æ„æ”¯æŒJWTé‰´æƒ/é™æµ/ç†”æ–­ç­‰ç­–ç•¥çƒ­æ›´æ–° |
| **Agentæ¨¡å—**  | APIäº¤äº’å±‚         | FastAPI + HTTPX                    | 0.110.0 | å¼‚æ­¥HTTPå®¢æˆ·ç«¯æ”¯æŒSSE/WebSocketé•¿è¿æ¥ |
|                | å¤šæ¨¡æ€å¤„ç†        | Coze Multi-Modal API             | 2024.2  | æ”¯æŒæ–‡ç”Ÿå›¾/å›¾ç”Ÿæ–‡å¤šæ¨¡æ€è”åˆæ¨ç† |
| **å¾®ä¿¡æœåŠ¡**    | æ¶ˆæ¯è·¯ç”±          | FastAPI WebSocket                | 0.110.0 | æ”¯æŒä¸‡äººçº§å¹¶å‘æ¶ˆæ¯æ¨é€ï¼Œæ¶ˆæ¯å‹ç¼©ç‡60%+ |
|                | ä»»åŠ¡è°ƒåº¦          | Celery                           | 5.3.6   | æ”¯æŒå®šæ—¶ä»»åŠ¡ä¸å·¥ä½œæµç¼–æ’ï¼Œä»»åŠ¡å¤±è´¥è‡ªåŠ¨é‡è¯• |
| **åŸºç¡€è®¾æ–½**    | å®¹å™¨ç¼–æ’          | Docker Compose                   | 2.24.5  | æ”¯æŒæœåŠ¡ä¾èµ–ç®¡ç†ï¼Œå¼€å‘-ç”Ÿäº§ç¯å¢ƒä¸€è‡´æ€§ä¿éšœ |
|                | æ—¥å¿—ç®¡ç†          | Loki + Promtail                  | 2.9.4   | æ”¯æŒæ—¥å¿—æ ‡ç­¾åŒ–ç´¢å¼•ï¼Œå­˜å‚¨ç©ºé—´èŠ‚çœ70% |

### æ ¸å¿ƒæ¨¡å—å®ç°

#### çˆ¬è™«æ··åˆæ¶æ„å®ç°æ–¹æ¡ˆ

![çˆ¬è™«æ··åˆæ¶æ„æ–¹æ¡ˆ](./docs/assets/çˆ¬è™«æ··åˆæ¶æ„æ–¹æ¡ˆ.png)

è¯´æ˜ï¼š

1. **å¤æ‚ç™»å½•åœºæ™¯**ï¼šä½¿ç”¨Seleniumå¤„ç†å—å¼€æ•™åŠ¡ç³»ç»Ÿç­‰éœ€è¦æ¨¡æ‹Ÿå®Œæ•´ç™»å½•æµç¨‹çš„ç³»ç»Ÿï¼ˆ[BrowserStackæŒ‡å—](https://www.browserstack.com/guide/web-scraping-using-selenium-python)ï¼‰ã€‚
2. **æ··åˆæŠ“åŒ…æ¨¡å¼**ï¼šç»“åˆMitmproxy+Selenium Wireå®ç°å…¬ä¼—å·APIè¯·æ±‚æ•è·ï¼ˆ[Scrape-itæ¡ˆä¾‹](https://scrape-it.cloud/blog/web-scraping-using-selenium-python)ï¼‰ã€‚
3. **ååçˆ¬ç­–ç•¥**ï¼šé€šè¿‡Browserlessé›†ç¾¤å®ç°IPè½®æ¢å’Œæµè§ˆå™¨æŒ‡çº¹æ··æ·†ã€‚
4. **æ€§èƒ½å¹³è¡¡**ï¼šPlaywrightå¤„ç†ç°ä»£Webåº”ç”¨ï¼ˆBç«™/å°çº¢ä¹¦ï¼‰ï¼ŒSeleniumä¸“æ³¨å¤æ‚ä¼ ç»Ÿç³»ç»Ÿã€‚

#### çŸ¥è¯†åº“å…¥åº“æµç¨‹

![çŸ¥è¯†åº“å…¥åº“æµç¨‹](./docs/assets/çŸ¥è¯†åº“å…¥åº“æµç¨‹.png)

#### ç”¨æˆ·è´¡çŒ®ç®¡é“

![ç”¨æˆ·è´¡çŒ®ç®¡é“](./docs/assets/ç”¨æˆ·è´¡çŒ®ç®¡é“.png)

#### agentäº¤äº’æ¶æ„

![agentäº¤äº’æ¶æ„](./docs/assets/agentäº¤äº’æ¶æ„.png)

#### webæœåŠ¡æ¶æ„

![webæœåŠ¡æ¶æ„](./docs/assets/webæœåŠ¡æ¶æ„.png)

### éƒ¨ç½²è§„èŒƒ

```yaml
version: '3.8'

services:
  apisix:
    image: apache/apisix:3.8.0-alpine
    ports:
      - "9080:9080"
      - "9180:9180"
    volumes:
      - ./apisix/config.yaml:/usr/local/apisix/conf/config.yaml
    networks:
      - nkuwiki-net
    depends_on:
      redis:
        condition: service_healthy
      rabbitmq:
        condition: service_healthy

  web:
    image: nkuwiki/web:v1.2
    env_file: .env
    networks:
      - nkuwiki-net
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
      interval: 30s
      timeout: 10s
      retries: 3

  celery_worker:
    image: nkuwiki/worker:v1.1
    env_file: .env
    command: celery -A services.wechat.celery_app worker --loglevel=info
    depends_on:
      redis:
        condition: service_healthy
      rabbitmq:
        condition: service_healthy

  redis:
    image: redis:7.2.4-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 10s

  rabbitmq:
    image: rabbitmq:3.13.0-management-alpine
    environment:
      RABBITMQ_DEFAULT_USER: ${RABBITMQ_USER}
      RABBITMQ_DEFAULT_PASS: ${RABBITMQ_PASS}
    ports:
      - "5672:5672"
      - "15672:15672"
    volumes:
      - rabbitmq_data:/var/lib/rabbitmq
    healthcheck:
      test: ["CMD", "rabbitmq-diagnostics", "check_running"]
      interval: 30s

  seaweedfs:
    image: chrislusf/seaweedfs:3.64
    ports:
      - "9333:9333"  # Master
      - "8080:8080"  # Volume
    command: "server -dir=/data"
    volumes:
      - seaweedfs_data:/data

  otel_collector:
    image: otel/opentelemetry-collector-contrib:0.96.0
    volumes:
      - ./infrastructure/monitoring/otel-config.yaml:/etc/otelcol/config.yaml
    ports:
      - "4317:4317" # OTLP gRPC
      - "4318:4318" # OTLP HTTP

volumes:
  redis_data:
  rabbitmq_data:
  seaweedfs_data:

networks:
  nkuwiki-net:
    driver: bridge
    attachable: true

# åå‘ä»£ç†é…ç½®ï¼ˆå¯é€‰ï¼‰
# traefik:
#   image: traefik:v2.11
#   ports:
#     - "80:80"
#     - "443:443"
#   volumes:
#     - /var/run/docker.sock:/var/run/docker.sock:ro
```

**éƒ¨ç½²è¯´æ˜**ï¼š

1. ä½¿ç”¨`env_file`ç®¡ç†æ•æ„Ÿé…ç½®ï¼ˆéœ€åˆ›å»º.envæ–‡ä»¶ï¼‰ã€‚
2. å¥åº·æ£€æŸ¥æœºåˆ¶ä¿éšœæœåŠ¡å¯åŠ¨é¡ºåºã€‚
3. ç‹¬ç«‹å­˜å‚¨å·å®ç°æ•°æ®æŒä¹…åŒ–ã€‚
4. OpenTelemetry Collectorå®ç°ç»Ÿä¸€ç›‘æ§ã€‚

## ğŸ“š æ–‡æ¡£ç»´æŠ¤

| ç‰ˆæœ¬ | æ—¥æœŸ       | ä¿®æ”¹äºº   | å˜æ›´æè¿°               |
|------|------------|----------|-----------------------|
| 1.0  | 2025-02-03 | aokimi   | åˆç¨¿       |
| 1.1  | 2025-02-05 | aokimi   | å›¢é˜Ÿæ›´æ–°|
