import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{e,h as a,o as n}from"./app-4l060Wgd.js";const l={};function t(d,s){return n(),e("div",null,s[0]||(s[0]=[a(`<h1 id="redis配置与使用指南" tabindex="-1"><a class="header-anchor" href="#redis配置与使用指南"><span>Redis配置与使用指南</span></a></h1><p>Redis在nkuwiki项目中主要用于数据库连接池管理、缓存和会话存储。</p><h2 id="配置方法" tabindex="-1"><a class="header-anchor" href="#配置方法"><span>配置方法</span></a></h2><h3 id="基础配置" tabindex="-1"><a class="header-anchor" href="#基础配置"><span>基础配置</span></a></h3><p>配置文件位置：<code>config.json</code> 中的 <code>etl.data.redis</code> 节点</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;etl&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;data&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      &quot;redis&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;host&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;localhost&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;port&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">6379</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;db&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        &quot;password&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Nkuwiki_Redis_2025!&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="服务器配置" tabindex="-1"><a class="header-anchor" href="#服务器配置"><span>服务器配置</span></a></h3><p>生产环境配置文件：<code>/etc/redis/redis.conf</code></p><p>关键配置项：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>maxmemory 4gb</span></span>
<span class="line"><span>maxmemory-policy allkeys-lru</span></span>
<span class="line"><span>appendonly yes</span></span>
<span class="line"><span>bind 127.0.0.1</span></span>
<span class="line"><span>requirepass 强密码</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="使用说明" tabindex="-1"><a class="header-anchor" href="#使用说明"><span>使用说明</span></a></h2><h3 id="数据库连接池管理" tabindex="-1"><a class="header-anchor" href="#数据库连接池管理"><span>数据库连接池管理</span></a></h3><p><code>etl/load/db_pool_manager.py</code> 使用Redis协调多实例环境下的连接池大小。<br> 当Redis不可用时自动降级为本地模式。</p><h3 id="测试连接" tabindex="-1"><a class="header-anchor" href="#测试连接"><span>测试连接</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">python</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tools/test_redis.py</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="管理接口" tabindex="-1"><a class="header-anchor" href="#管理接口"><span>管理接口</span></a></h3><ul><li>连接池状态：<code>GET /api/admin/system/db-pool</code></li><li>调整连接池：<code>POST /api/admin/system/db-pool/resize?size=16</code></li></ul><h2 id="常见问题" tabindex="-1"><a class="header-anchor" href="#常见问题"><span>常见问题</span></a></h2><ol><li><strong>连接失败</strong>：检查服务状态、配置和防火墙</li><li><strong>认证失败</strong>：检查密码配置</li><li><strong>性能问题</strong>：调整连接池大小和内存策略</li></ol><p>相关日志：</p><ul><li>服务器日志：<code>/var/log/redis/redis-server.log</code></li><li>应用日志：<code>logs/etl.log</code></li></ul><h2 id="安全建议" tabindex="-1"><a class="header-anchor" href="#安全建议"><span>安全建议</span></a></h2><ol><li>不在公网暴露Redis端口</li><li>使用强密码</li><li>限制内存使用</li><li>定期备份数据</li></ol><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><ul><li><a href="https://redis.io/documentation" target="_blank" rel="noopener noreferrer">Redis官方文档</a></li><li><a href="https://redis.io/topics/security" target="_blank" rel="noopener noreferrer">Redis安全最佳实践</a></li></ul>`,25)]))}const p=i(l,[["render",t],["__file","redis_guide.html.vue"]]),o=JSON.parse('{"path":"/docs/redis_guide.html","title":"Redis配置与使用指南","lang":"zh-CN","frontmatter":{"description":"Redis配置与使用指南 Redis在nkuwiki项目中主要用于数据库连接池管理、缓存和会话存储。 配置方法 基础配置 配置文件位置：config.json 中的 etl.data.redis 节点 服务器配置 生产环境配置文件：/etc/redis/redis.conf 关键配置项： 使用说明 数据库连接池管理 etl/load/db_pool_m...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/docs/redis_guide.html"}],["meta",{"property":"og:site_name","content":"南开WIKI"}],["meta",{"property":"og:title","content":"Redis配置与使用指南"}],["meta",{"property":"og:description","content":"Redis配置与使用指南 Redis在nkuwiki项目中主要用于数据库连接池管理、缓存和会话存储。 配置方法 基础配置 配置文件位置：config.json 中的 etl.data.redis 节点 服务器配置 生产环境配置文件：/etc/redis/redis.conf 关键配置项： 使用说明 数据库连接池管理 etl/load/db_pool_m..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-27T00:38:50.000Z"}],["meta",{"property":"article:modified_time","content":"2025-03-27T00:38:50.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Redis配置与使用指南\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-03-27T00:38:50.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Because\\",\\"url\\":\\"https://github.com/Because66666\\"}]}"]]},"git":{"createdTime":1743035930000,"updatedTime":1743035930000,"contributors":[{"name":"Because66666","username":"Because66666","email":"z66666z@163.com","commits":1,"url":"https://github.com/Because66666"}]},"readingTime":{"minutes":0.97,"words":291},"filePathRelative":"docs/redis_guide.md","localizedDate":"2025年3月27日","autoDesc":true}');export{p as comp,o as data};
