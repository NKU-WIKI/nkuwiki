import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{e as s,h as d,f as e,t as n,o}from"./app-CBln_ck3.js";const h={};function i(a,t){return o(),s("div",null,[t[1]||(t[1]=d('<h1 id="coze-智能体后端-api-文档" tabindex="-1"><a class="header-anchor" href="#coze-智能体后端-api-文档"><span>Coze 智能体后端 API 文档</span></a></h1><h2 id="一、调用说明" tabindex="-1"><a class="header-anchor" href="#一、调用说明"><span>一、调用说明</span></a></h2><h3 id="调用流程" tabindex="-1"><a class="header-anchor" href="#调用流程"><span>调用流程</span></a></h3>',3)),e("ol",null,[e("li",null,[e("p",null,"获取 API URL 和 "+n(a.ApiKey),1)]),t[0]||(t[0]=d("<li><p>请求头设置：</p><ul><li>Header 添加 <code>Apikey={{ApiKey}}</code></li><li>Body 包含 <code>AppKey={{ApiKey}}</code> 和 <code>UserID</code>（1-20字符唯一标识）</li></ul></li><li><p>对话流程：</p><ul><li><code>CreateConversation</code> 创建会话</li><li><code>ChatQuery</code> 进行流式对话</li><li>可选操作：<code>StopMessage</code>/<code>QueryAgain</code>/<code>Feedback</code></li></ul></li>",2))]),t[2]||(t[2]=d('<hr><h2 id="二、核心-api-接口" tabindex="-1"><a class="header-anchor" href="#二、核心-api-接口"><span>二、核心 API 接口</span></a></h2><h3 id="会话管理" tabindex="-1"><a class="header-anchor" href="#会话管理"><span>会话管理</span></a></h3><h4 id="创建会话-post-create-conversation" tabindex="-1"><a class="header-anchor" href="#创建会话-post-create-conversation"><span>创建会话 <code>POST /create_conversation</code></span></a></h4><p><strong>请求参数</strong>：</p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>AppKey</td><td>string</td><td>✓</td><td>应用 key</td></tr><tr><td>Inputs</td><td>map(string,string)</td><td>✗</td><td>变量输入</td></tr><tr><td>UserID</td><td>string</td><td>✓</td><td>用户唯一标识</td></tr></tbody></table><p><strong>响应参数</strong>：</p><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>Conversation</td><td>AppConversationBrief</td><td>会话信息</td></tr><tr><td>BaseResp</td><td>BaseResp</td><td>状态响应</td></tr></tbody></table><hr><h3 id="对话交互" tabindex="-1"><a class="header-anchor" href="#对话交互"><span>对话交互</span></a></h3><h4 id="发起对话-post-chat-query" tabindex="-1"><a class="header-anchor" href="#发起对话-post-chat-query"><span>发起对话 <code>POST /chat_query</code></span></a></h4><p><strong>请求参数</strong>：</p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>AppKey</td><td>string</td><td>✓</td><td>应用 key</td></tr><tr><td>AppConversationID</td><td>string</td><td>✓</td><td>会话 ID</td></tr><tr><td>Query</td><td>string</td><td>✓</td><td>用户输入内容</td></tr><tr><td>ResponseMode</td><td>string</td><td>✓</td><td>streaming/blocking</td></tr><tr><td>PubAgentJump</td><td>bool</td><td>✗</td><td>是否输出agent信息</td></tr><tr><td>UserID</td><td>string</td><td>✓</td><td>用户唯一标识</td></tr></tbody></table><p><strong>响应</strong>：SSE 格式数据流</p><h4 id="消息流响应格式" tabindex="-1"><a class="header-anchor" href="#消息流响应格式"><span>消息流响应格式</span></a></h4><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>event</td><td>string</td><td>数据类型：text/image/audio/video/file 等</td></tr><tr><td>data</td><td>object</td><td>包含事件类型和内容：</td></tr><tr><td>- event</td><td>string</td><td>事件类型：message_start/message_end/knowledge_retrieve_start 等</td></tr><tr><td>- docs</td><td>object</td><td>当事件为知识检索结束时返回：</td></tr><tr><td>- outputList</td><td>array</td><td>检索结果列表，包含 output 等字段</td></tr></tbody></table><hr><h4 id="重新生成-post-query-again" tabindex="-1"><a class="header-anchor" href="#重新生成-post-query-again"><span>重新生成 <code>POST /query_again</code></span></a></h4><p><strong>请求参数</strong>：</p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>AppKey</td><td>string</td><td>✓</td><td>应用 key</td></tr><tr><td>AppConversationID</td><td>string</td><td>✓</td><td>会话 ID</td></tr><tr><td>MessageID</td><td>string</td><td>✓</td><td>上轮消息 ID</td></tr><tr><td>UserID</td><td>string</td><td>✓</td><td>用户唯一标识</td></tr></tbody></table><hr><h3 id="会话历史" tabindex="-1"><a class="header-anchor" href="#会话历史"><span>会话历史</span></a></h3><h4 id="获取消息历史-post-get-conversation-messages" tabindex="-1"><a class="header-anchor" href="#获取消息历史-post-get-conversation-messages"><span>获取消息历史 <code>POST /get_conversation_messages</code></span></a></h4><p><strong>请求参数</strong>：</p><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>AppKey</td><td>string</td><td>✓</td><td>应用 key</td></tr><tr><td>AppConversationID</td><td>string</td><td>✓</td><td>会话 ID</td></tr><tr><td>Limit</td><td>i32</td><td>✓</td><td>返回条数限制</td></tr><tr><td>UserID</td><td>string</td><td>✓</td><td>用户唯一标识</td></tr></tbody></table><p><strong>响应参数</strong>：</p><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>Messages</td><td>list(ChatMessageInfo)</td><td>历史消息列表</td></tr><tr><td>BaseResp</td><td>BaseResp</td><td>状态响应</td></tr></tbody></table><hr><h2 id="三、全量-api-列表" tabindex="-1"><a class="header-anchor" href="#三、全量-api-列表"><span>三、全量 API 列表</span></a></h2><table><thead><tr><th>接口名称</th><th>方法</th><th>路径</th><th>功能说明</th></tr></thead><tbody><tr><td>获取应用配置</td><td>POST</td><td>/get_app_config_preview</td><td>获取变量配置和开场白</td></tr><tr><td>更新会话</td><td>POST</td><td>/update_conversation</td><td>修改会话名称和变量</td></tr><tr><td>删除消息</td><td>POST</td><td>/delete_message</td><td>删除指定消息</td></tr><tr><td>设置默认回答</td><td>POST</td><td>/set_message_answer_used</td><td>设置多回答中的默认选项</td></tr><tr><td>工作流测试</td><td>POST</td><td>/run_app_workflow</td><td>同步测试工作流</td></tr></tbody></table><hr><h2 id="四、数据结构详情" tabindex="-1"><a class="header-anchor" href="#四、数据结构详情"><span>四、数据结构详情</span></a></h2><h3 id="appconversationbrief" tabindex="-1"><a class="header-anchor" href="#appconversationbrief"><span>AppConversationBrief</span></a></h3><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>AppConversationID</td><td>string</td><td>会话 ID</td></tr><tr><td>ConversationName</td><td>string</td><td>会话名称</td></tr></tbody></table><h3 id="chatmessageinfo" tabindex="-1"><a class="header-anchor" href="#chatmessageinfo"><span>ChatMessageInfo</span></a></h3><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>QueryID</td><td>string</td><td>询问 ID</td></tr><tr><td>AnswerInfo</td><td>MessageAnswerInfo</td><td>主回答信息</td></tr><tr><td>OtherAnswers</td><td>list(MessageAnswerInfo)</td><td>其他备选回答</td></tr><tr><td>QueryExtends</td><td>QueryExtendsInfo</td><td>附件文件信息</td></tr></tbody></table><h3 id="messageanswerinfo" tabindex="-1"><a class="header-anchor" href="#messageanswerinfo"><span>MessageAnswerInfo</span></a></h3><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>MessageID</td><td>string</td><td>消息唯一 ID</td></tr><tr><td>TotalTokens</td><td>i32</td><td>消耗 token 总数</td></tr><tr><td>Latency</td><td>double</td><td>响应耗时（秒）</td></tr><tr><td>TracingJsonStr</td><td>string</td><td>调试追踪信息</td></tr></tbody></table><h3 id="messagestreamresponse" tabindex="-1"><a class="header-anchor" href="#messagestreamresponse"><span>MessageStreamResponse</span></a></h3><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>event</td><td>string</td><td>数据类型：text/image/audio/video/file 等</td></tr><tr><td>data</td><td>object</td><td>包含事件类型和内容：</td></tr><tr><td>- event</td><td>string</td><td>事件类型：message_start/message_end/knowledge_retrieve_start 等</td></tr><tr><td>- docs</td><td>object</td><td>当事件为 knowledge_retrieve_end 或 qa_retrieve_end 时返回：</td></tr><tr><td>- OutputList</td><td>array</td><td>检索结果列表，每个元素包含 output 字段</td></tr></tbody></table><hr><h2 id="五、枚举类型" tabindex="-1"><a class="header-anchor" href="#五、枚举类型"><span>五、枚举类型</span></a></h2><h3 id="liketype" tabindex="-1"><a class="header-anchor" href="#liketype"><span>LikeType</span></a></h3><table><thead><tr><th>值</th><th>说明</th></tr></thead><tbody><tr><td>-1</td><td>踩</td></tr><tr><td>0</td><td>默认</td></tr><tr><td>1</td><td>赞</td></tr></tbody></table><h3 id="variabletype" tabindex="-1"><a class="header-anchor" href="#variabletype"><span>VariableType</span></a></h3><table><thead><tr><th>值</th><th>说明</th></tr></thead><tbody><tr><td>Text</td><td>文本类型</td></tr><tr><td>Enum</td><td>枚举类型</td></tr><tr><td>Paragraph</td><td>段落类型</td></tr></tbody></table><hr><p>注：保留全部技术参数，优化表格展示和层级结构，修正格式问题，关键字段用<strong>加粗</strong>突出显示。</p>',48))])}const l=r(h,[["render",i],["__file","HiagentAPI.html.vue"]]),g=JSON.parse('{"path":"/docs/coze_hiagent/HiagentAPI.html","title":"Coze 智能体后端 API 文档","lang":"zh-CN","frontmatter":{"description":"Coze 智能体后端 API 文档 一、调用说明 调用流程 获取 API URL 和 {{ApiKey}} 请求头设置： Header 添加 Apikey={{ApiKey}} Body 包含 AppKey={{ApiKey}} 和 UserID（1-20字符唯一标识） 对话流程： CreateConversation 创建会话 ChatQuery 进...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/docs/coze_hiagent/HiagentAPI.html"}],["meta",{"property":"og:site_name","content":"南开WIKI"}],["meta",{"property":"og:title","content":"Coze 智能体后端 API 文档"}],["meta",{"property":"og:description","content":"Coze 智能体后端 API 文档 一、调用说明 调用流程 获取 API URL 和 {{ApiKey}} 请求头设置： Header 添加 Apikey={{ApiKey}} Body 包含 AppKey={{ApiKey}} 和 UserID（1-20字符唯一标识） 对话流程： CreateConversation 创建会话 ChatQuery 进..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-01T07:14:53.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-01T07:14:53.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Coze 智能体后端 API 文档\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-04-01T07:14:53.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Because\\",\\"url\\":\\"https://github.com/Because66666\\"}]}"]]},"git":{"createdTime":1742811851000,"updatedTime":1743491693000,"contributors":[{"name":"Because66666","username":"Because66666","email":"z66666z@163.com","commits":3,"url":"https://github.com/Because66666"}]},"readingTime":{"minutes":2.44,"words":731},"filePathRelative":"docs/coze&hiagent/HiagentAPI.md","localizedDate":"2025年3月24日","autoDesc":true}');export{l as comp,g as data};
