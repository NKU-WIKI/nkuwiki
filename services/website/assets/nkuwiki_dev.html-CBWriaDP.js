import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{e as a,h as i,o as l}from"./app-guG5bR-m.js";const p={};function e(c,n){return l(),a("div",null,n[0]||(n[0]=[i(`<h1 id="📚nkuwiki开发文档" tabindex="-1"><a class="header-anchor" href="#📚nkuwiki开发文档"><span>📚nkuwiki开发文档</span></a></h1><h2 id="🎯-愿景与目标" tabindex="-1"><a class="header-anchor" href="#🎯-愿景与目标"><span>🎯 愿景与目标</span></a></h2><p>我们致力于构建<strong>南开知识共同体</strong>，践行 <strong>开源·共治·普惠</strong> 三位一体价值体系<br> （🔓 技术开源透明 + 🤝 社区协同共治 + 🆓 服务永久普惠），实现：</p><ul><li><p>🚀 <strong>消除南开学子信息差距</strong></p></li><li><p>💡 <strong>开放知识资源免费获取</strong></p></li><li><p>🌱 <strong>构建可持续的互助社区</strong></p></li></ul><p><strong>项目亮点</strong>：</p><ul><li><p>🤖 <strong>开源知识中枢</strong></p><ul><li>🧠 双擎驱动：<strong>RAG</strong>框架 + <strong>SOTA</strong>模型推理</li><li>🔄 <strong>动态知识图谱</strong><ul><li>🔓 接入<strong>南开全渠道数据源</strong>（网站/微信公众号/校园集市/小红书/微博/抖音/B站/知乎etc.）</li><li>🤝 <strong>社区共治</strong>：志愿者团队与用户协同维护</li><li>🛡️ <strong>开源评估框架</strong>（贡献者透明审计）</li></ul></li><li>🔍 多模态和丰富插件支持 <ul><li>支持文本/语音/图像/视频全感官知识获取</li><li>丰富插件支持：搜索引擎、创意生图、数据分析etc.</li></ul></li></ul></li><li><p>👥 <strong>普惠共治机制</strong></p><ul><li>三维协同架构： <ul><li>💻 <strong>技术层</strong>：开源社区维护核心栈</li><li>⚖️ <strong>治理层</strong>：DAO式内容审核委员会</li><li>👤 <strong>应用层</strong>：贡献即治理（1Token=1投票权）</li></ul></li></ul></li><li><p>💎 <strong>贡献流通系统</strong>：</p><ul><li>🎁 <strong>激励全周期覆盖</strong>（采集/清洗/标注）</li><li>♻️ <strong>数字权益兑换</strong>： <ul><li>⚡ 优先计算资源</li><li>🎚️ 个性化知识门户</li><li>🗳️ 治理代议席位</li></ul></li></ul></li></ul><h2 id="🏗-系统架构图" tabindex="-1"><a class="header-anchor" href="#🏗-系统架构图"><span>🏗 系统架构图</span></a></h2><div class="language-plantuml line-numbers-mode" data-highlighter="shiki" data-ext="plantuml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>@startuml</span></span>
<span class="line"><span>!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== 标题样式调整 ====</span></span>
<span class="line"><span>skinparam titleFontSize 20</span></span>
<span class="line"><span>skinparam titleFontName &quot;Microsoft YaHei&quot;</span></span>
<span class="line"><span>skinparam titleFontColor #1A237E</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== 布局参数 ====</span></span>
<span class="line"><span>skinparam nodesep 50</span></span>
<span class="line"><span>skinparam ranksep 150</span></span>
<span class="line"><span>skinparam linetype ortho</span></span>
<span class="line"><span>skinparam defaultFontSize 16</span></span>
<span class="line"><span>skinparam defaultFontName &quot;Microsoft YaHei&quot;</span></span>
<span class="line"><span>skinparam monochrome false</span></span>
<span class="line"><span>skinparam shadowing false</span></span>
<span class="line"><span>skinparam wrapWidth 150</span></span>
<span class="line"><span>skinparam nodeFontSize 14</span></span>
<span class="line"><span>skinparam defaultTextAlignment center</span></span>
<span class="line"><span>LAYOUT_LEFT_RIGHT()</span></span>
<span class="line"><span>LAYOUT_WITH_LEGEND()</span></span>
<span class="line"><span></span></span>
<span class="line"><span>title nkuwiki 系统架构全景图\\n&lt;size:18&gt;——开源·共治·普惠的南开知识生态&lt;/size&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== 核心架构 ====</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Person(user, &quot;校园用户&quot;, &quot;多终端访问服务\\n• 微信公众号\\n• 网站\\n• 飞书&quot;, $sprite=&quot;person2&quot;, $tags=&quot;user&quot;)</span></span>
<span class="line"><span>Person(volunteer, &quot;志愿者&quot;, &quot;知识库维护与审核&quot;, $sprite=&quot;person2&quot;, $tags=&quot;volunteer&quot;)</span></span>
<span class="line"><span>&#39; ==== 核心系统层 ====</span></span>
<span class="line"><span>System_Boundary(nkuwiki_core, &quot;核心系统层&quot;) {</span></span>
<span class="line"><span>    ContainerDb(knowledge_db, &quot;知识库&quot;, &quot;FAISS&quot;, &quot;向量化存储\\n1. 动态版本控制\\n2. 增量更新索引\\n3. 志愿者人工回滚&quot;, $tags=&quot;core_db&quot;)</span></span>
<span class="line"><span>    Container(msg_broker, &quot;消息中枢&quot;, &quot;RabbitMQ&quot;, &quot;AMQP协议\\n1. 持久化队列\\n2. 消息确认机制\\n3. 消息重试机制&quot;, $tags=&quot;mq&quot;)</span></span>
<span class="line"><span>    Container(ai_agent, &quot;智能Agent&quot;, &quot;Coze&quot;, &quot;SOTA-LLM多模态交互\\n1. RAG增强\\n2. 工作流\\n3. 插件调用&quot;, $tags=&quot;ai&quot;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== 系统调度层 ====</span></span>
<span class="line"><span>System_Boundary(infra, &quot;系统调度层&quot;) {</span></span>
<span class="line"><span>    Container(apisix, &quot;API网关&quot;, &quot;Apache APISIX&quot;, &quot;流量控制&quot;, $tags=&quot;infra&quot;)</span></span>
<span class="line"><span>    Container(otel, &quot;监控体系&quot;, &quot;OpenTelemetry&quot;, &quot;全链路追踪&quot;, $tags=&quot;monitor&quot;)</span></span>
<span class="line"><span>    Container(celery, &quot;任务调度&quot;, &quot;Celery+Redis&quot;, &quot;分布式任务&quot;, $tags=&quot;scheduler&quot;)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== 数据层 ====</span></span>
<span class="line"><span>System_Boundary(data_layer, &quot;数据层&quot;) {</span></span>
<span class="line"><span> ContainerDb(structured_db, &quot;结构化存储&quot;, &quot;DuckDB&quot;, &quot;关系型数据&quot;, $tags=&quot;core_db&quot;)</span></span>
<span class="line"><span>    ContainerDb(seaweedfs, &quot;对象存储&quot;, &quot;SeaweedFS&quot;, &quot;非关系型数据&quot;, $tags=&quot;storage&quot;)</span></span>
<span class="line"><span>    Container(etl_engine, &quot;ETL引擎&quot;, &quot;Playwright+Selenium&quot;, &quot;多源数据实时采集\\n1. 智能反爬\\n2. 数据清洗\\n3. 数据载入&quot;, $tags=&quot;etl&quot;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== 外部系统 ====</span></span>
<span class="line"><span>System_Ext(plugins, &quot;插件市场&quot;, &quot;Coze API&quot;, $tags=&quot;ext&quot;)</span></span>
<span class="line"><span>System_Ext(data_sources, &quot;数据源&quot;, &quot;多渠道输入\\n1. 网站\\n2. 微信公众号\\n3. 校园集市\\n4. 小红书\\n5. ...&quot;, $tags=&quot;ext&quot;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== 数据流关系 ====</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; 用户流</span></span>
<span class="line"><span>Rel(user, msg_broker, &quot;请求服务/提交贡献&quot;, &quot;微信/网站/飞书UI&quot;)</span></span>
<span class="line"><span>Rel(msg_broker, ai_agent, &quot;调用服务&quot;, &quot;CozeAPI&quot;)</span></span>
<span class="line"><span>Rel(msg_broker, user, &quot;提供服务/发放token&quot;, &quot;微信/网站/飞书UI&quot;)</span></span>
<span class="line"><span>Rel(ai_agent, plugins, &quot;调用插件&quot;, &quot;CozeAPI&quot;)</span></span>
<span class="line"><span>Rel(ai_agent, knowledge_db, &quot;RAG（检索增强生成）&quot;, &quot;CozeAPI&quot;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; 志愿者流</span></span>
<span class="line"><span>Rel(volunteer, msg_broker, &quot;人工审核&quot;, &quot;微信/网站/飞书UI&quot;)</span></span>
<span class="line"><span>Rel(volunteer, knowledge_db, &quot;评估校准/贡献入库&quot;, &quot;admin&quot;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; 数据ETL流</span></span>
<span class="line"><span>Rel(data_sources, etl_engine, &quot;数据采集&quot;, &quot;HTTPS/API&quot;)</span></span>
<span class="line"><span>Rel(etl_engine, structured_db, &quot;清洗/载入数据&quot;, &quot;Python API&quot;)</span></span>
<span class="line"><span>Rel(etl_engine, seaweedfs, &quot;清洗/载入数据&quot;, &quot;Python API&quot;)</span></span>
<span class="line"><span>Rel(structured_db, msg_broker, &quot;元数据推送&quot;, &quot;AMQP&quot;)</span></span>
<span class="line"><span>Rel(seaweedfs, msg_broker, &quot;元数据推送&quot;, &quot;AMQP&quot;)</span></span>
<span class="line"><span>Rel(msg_broker, knowledge_db, &quot;筛选入库&quot;, &quot;gRPC&quot;)</span></span>
<span class="line"><span>Rel(ai_agent, msg_broker, &quot;AI审核&quot;, &quot;CozeAPI&quot;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; 系统管理流</span></span>
<span class="line"><span>Rel(apisix, msg_broker, &quot;流量路由&quot;, &quot;HTTPS&quot;)</span></span>
<span class="line"><span>Rel(celery, etl_engine, &quot;任务调度&quot;, &quot;Redis Protocol&quot;)</span></span>
<span class="line"><span>Rel(celery, msg_broker, &quot;任务调度&quot;, &quot;Redis Protocol&quot;)</span></span>
<span class="line"><span>Rel(otel, apisix, &quot;监控采集&quot;, &quot;OTLP&quot;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== 样式定义 ====</span></span>
<span class="line"><span>AddElementTag(&quot;core_db&quot;, $fontColor=&quot;#BF360C&quot;, $borderColor=&quot;#D84315&quot;, $bgColor=&quot;#FFCCBC&quot;)</span></span>
<span class="line"><span>AddElementTag(&quot;etl&quot;, $fontColor=&quot;#1B5E20&quot;, $borderColor=&quot;#43A047&quot;, $bgColor=&quot;#C8E6C9&quot;)</span></span>
<span class="line"><span>AddElementTag(&quot;mq&quot;, $fontColor=&quot;#004D40&quot;, $borderColor=&quot;#00796B&quot;, $bgColor=&quot;#B2DFDB&quot;)</span></span>
<span class="line"><span>AddElementTag(&quot;ai&quot;, $fontColor=&quot;#311B92&quot;, $borderColor=&quot;#673AB7&quot;, $bgColor=&quot;#D1C4E9&quot;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>note right of msg_broker</span></span>
<span class="line"><span>&lt;color:#00796B&gt;**消息处理流程**</span></span>
<span class="line"><span></span></span>
<span class="line"><span>1. 接收用户贡献</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2. 质量评估过滤</span></span>
<span class="line"><span></span></span>
<span class="line"><span>3. 触发知识库更新</span></span>
<span class="line"><span></span></span>
<span class="line"><span>4. Token发放</span></span>
<span class="line"><span></span></span>
<span class="line"><span>end note</span></span>
<span class="line"><span></span></span>
<span class="line"><span>note left of knowledge_db</span></span>
<span class="line"><span>&lt;color:#D84315&gt;**版本策略**</span></span>
<span class="line"><span></span></span>
<span class="line"><span>1. 时间窗口快照</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2. 增量更新索引</span></span>
<span class="line"><span></span></span>
<span class="line"><span>3. 志愿者人工回滚</span></span>
<span class="line"><span></span></span>
<span class="line"><span>end note</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== 技术栈说明模块 ====</span></span>
<span class="line"><span>left to right direction</span></span>
<span class="line"><span>package &quot;通信协议&quot; &lt;&lt;Rectangle&gt;&gt; {</span></span>
<span class="line"><span>  [RPC] as rpc #LightBlue</span></span>
<span class="line"><span>  [gRPC] as grpc #LightGreen</span></span>
<span class="line"><span>  [AMQP] as amqp #LightPink</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>package &quot;应用场景&quot; &lt;&lt;Rectangle&gt;&gt; {</span></span>
<span class="line"><span>  [服务间通信] as service_com</span></span>
<span class="line"><span>  [消息队列] as mq</span></span>
<span class="line"><span>  [跨语言调用] as cross_lang</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>rpc -[hidden]-&gt; grpc</span></span>
<span class="line"><span>grpc -[hidden]-&gt; amqp</span></span>
<span class="line"><span>service_com -[hidden]-&gt; mq</span></span>
<span class="line"><span>mq -[hidden]-&gt; cross_lang</span></span>
<span class="line"><span></span></span>
<span class="line"><span>rpc --&gt; service_com : &quot;远程过程调用基础模式&quot;</span></span>
<span class="line"><span>grpc --&gt; cross_lang : &quot;Google开发的\\n现代RPC框架&quot;</span></span>
<span class="line"><span>amqp --&gt; mq : &quot;高级消息队列协议&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>note top of rpc</span></span>
<span class="line"><span>&lt;color:#1E88E5&gt;RPC（Remote Procedure Call）</span></span>
<span class="line"><span>基础通信范式，允许像调用本地方法一样</span></span>
<span class="line"><span>调用远程服务，不限定具体协议</span></span>
<span class="line"><span>end note</span></span>
<span class="line"><span></span></span>
<span class="line"><span>note top of grpc</span></span>
<span class="line"><span>&lt;color:#43A047&gt;gRPC特性：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 基于HTTP/2</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 使用Protocol Buffers</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 支持双向流</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 微服务场景性能提升40%+</span></span>
<span class="line"><span>end note</span></span>
<span class="line"><span></span></span>
<span class="line"><span>note top of amqp</span></span>
<span class="line"><span>&lt;color:#D81B60&gt;AMQP（Advanced Message Queuing Protocol）</span></span>
<span class="line"><span>企业级消息标准：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 持久化</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 事务支持</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 发布/订阅模式</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 南开架构中用于Token发放等异步场景</span></span>
<span class="line"><span>end note</span></span>
<span class="line"><span>@enduml</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`text</span></span>
<span class="line"><span></span></span>
<span class="line"><span>## 📅 演进路线</span></span>
<span class="line"><span></span></span>
<span class="line"><span>| 阶段            | 关键里程碑                          | 技术栈与架构决策                     | 交付产物                          |</span></span>
<span class="line"><span>|-----------------|-----------------------------------|--------------------------------------|----------------------------------|</span></span>
<span class="line"><span>| **MVP启动期**  </span></span>
<span class="line"><span>(0-3月) | ✅ 核心服务上线  </span></span>
<span class="line"><span>▪ 微信公众号智能问答MVP  </span></span>
<span class="line"><span>▪ 动态爬虫框架1.0  </span></span>
<span class="line"><span>▪ 重点平台数据接入（官网/公众号）  </span></span>
<span class="line"><span>▪ 知识库基础检索功能 | 🛠 FastAPI（API网关）  </span></span>
<span class="line"><span>🤖 Coze（智能Agent）  </span></span>
<span class="line"><span>🕷 Playwright（自动化爬虫） | 📦 容器化核心服务  </span></span>
<span class="line"><span>📚 部署指南+运维手册  </span></span>
<span class="line"><span>🔍 知识库检索API文档 |</span></span>
<span class="line"><span>| **生态构建期**  </span></span>
<span class="line"><span>(4-6月) | 🚀 核心系统扩展  </span></span>
<span class="line"><span>▪ 全平台爬虫覆盖  </span></span>
<span class="line"><span>▪ 数据质量看板1.0  </span></span>
<span class="line"><span>▪ 用户贡献系统原型  </span></span>
<span class="line"><span>▪ 反爬策略增强 | 🕸 Scrapy（分布式爬虫）  </span></span>
<span class="line"><span>📊 Prometheus+Granfana（监控）  </span></span>
<span class="line"><span>🔐 JWT+RBAC（权限控制） | 🧩 可插拔爬虫框架  </span></span>
<span class="line"><span>📈 质量评估系统  </span></span>
<span class="line"><span>🪙 Token激励原型系统 |</span></span>
<span class="line"><span>| **体系升级期**  </span></span>
<span class="line"><span>(7-9月) | 🌟 系统架构演进  </span></span>
<span class="line"><span>▪ 微服务化改造  </span></span>
<span class="line"><span>▪ 分布式积分系统  </span></span>
<span class="line"><span>▪ 全链路监控体系  </span></span>
<span class="line"><span>▪ 多模态知识引擎 | ☁ Spring Cloud Alibaba（微服务）  </span></span>
<span class="line"><span>📦 ELK（日志分析）  </span></span>
<span class="line"><span>🧠 Milvus（向量检索） | 🔄 积分系统微服务集群  </span></span>
<span class="line"><span>👁️ 系统健康看板  </span></span>
<span class="line"><span>🎨 多模态处理SDK |</span></span>
<span class="line"><span></span></span>
<span class="line"><span>**小团队演进策略**：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>1. 🎯 功能优先级：采用「剃刀原则」聚焦核心场景，首期仅保留问答/检索/基础爬虫功能</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2. 🧪 验证驱动：Token机制先实现简单积分发放，二期再引入兑换/消费闭环</span></span>
<span class="line"><span></span></span>
<span class="line"><span>3. 📶 渐进接入：平台接入按「官网→公众号→校园集市→社交平台」顺序分阶段实施</span></span>
<span class="line"><span></span></span>
<span class="line"><span>4. 🚧 架构演进：从单体→模块化→微服务渐进式改造，避免早期过度设计</span></span>
<span class="line"><span></span></span>
<span class="line"><span>## 💻 技术实现</span></span>
<span class="line"><span></span></span>
<span class="line"><span>### 项目结构树</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`plaintext</span></span>
<span class="line"><span>nkuwiki/</span></span>
<span class="line"><span>├── core/               # 核心</span></span>
<span class="line"><span>│   ├── agent/         # Agent核心模块</span></span>
<span class="line"><span>│   │   ├── coze/          # Coze平台集成</span></span>
<span class="line"><span>│   │   │   ├── coze_agent.py     # Agent实现</span></span>
<span class="line"><span>│   │   │   ├── coze_integration.py # API集成</span></span>
<span class="line"><span>│   │   │   └── coze_session.py   # 会话管理</span></span>
<span class="line"><span>│   │   ├── agent.py          # Agent抽象基类</span></span>
<span class="line"><span>│   │   ├── session_manager.py # 全局会话管理</span></span>
<span class="line"><span>│   │   └── agent_factory.py  # Agent工厂</span></span>
<span class="line"><span>│   ├── bridge/          # 连接agent和服务的桥梁</span></span>
<span class="line"><span>│   │   ├── bridge.py  # 桥梁</span></span>
<span class="line"><span>│   │   │   ├── context.py # 上下文</span></span>
<span class="line"><span>│   │   │   ├── reply.py # 回复</span></span>
<span class="line"><span>│   │   │   └── ...</span></span>
<span class="line"><span>│   ├── auth/          # 认证服务</span></span>
<span class="line"><span>│   │   ├── duckdb_operator.py  # DuckDB操作</span></span>
<span class="line"><span>│   │   └── redis_manager.py    # Redis连接管理</span></span>
<span class="line"><span>│   └── utils/         # 公共工具库</span></span>
<span class="line"><span>│       ├── common/        # 通用工具</span></span>
<span class="line"><span>│       │   ├── expired_dict.py  # 带过期字典</span></span>
<span class="line"><span>│       │   ├── string_utils.py   # 字符串处理</span></span>
<span class="line"><span>│       │   ├── const.py         # 常量定义</span></span>
<span class="line"><span>│       │   └── dequeue.py       # 双端队列实现</span></span>
<span class="line"><span>│       ├── plugins/       # 插件系统</span></span>
<span class="line"><span>│       │   ├── plugin_manager.py # 插件管理器</span></span>
<span class="line"><span>│       │   └── ...</span></span>
<span class="line"><span>│       ├── translate/     # 翻译工具</span></span>
<span class="line"><span>│       │   ├── factory.py # 翻译工厂</span></span>
<span class="line"><span>│       │   └── ...</span></span>
<span class="line"><span>│       ├── voice/         # 语音工具</span></span>
<span class="line"><span>│       │   ├── factory.py # 语音工厂</span></span>
<span class="line"><span>│       │   └── ...</span></span>
<span class="line"><span>│       └── anti_crawler/  # 反爬工具</span></span>
<span class="line"><span>│           ├── factory.py # 反爬工厂</span></span>
<span class="line"><span>│           └── ...</span></span>
<span class="line"><span>├── etl/               # 数据采集处理管道</span></span>
<span class="line"><span>│   ├── crawler/       # 爬虫管理</span></span>
<span class="line"><span>│   │   ├── base_crawler.py  # 爬虫基类</span></span>
<span class="line"><span>│   │   ├── wechat.py        # 微信公众号爬虫</span></span>
<span class="line"><span>│   │   └── init_script.js   # 反检测脚本</span></span>
<span class="line"><span>│   └── pipeline/      # 数据处理管道</span></span>
<span class="line"><span>│       ├── data_export.py   # 数据导出</span></span>
<span class="line"><span>│       └── merge_json.py    # 数据合并</span></span>
<span class="line"><span>├── services/</span></span>
<span class="line"><span>│   ├── terminal/      # 终端服务</span></span>
<span class="line"><span>│   ├── website/       # 网站服务</span></span>
<span class="line"><span>│   ├── wechatmp/      # 微信公众号服务</span></span>
<span class="line"><span>│   │   ├── wechatmp_channel.py  # 主通道逻辑</span></span>
<span class="line"><span>│   │   ├── passive_reply.py    # 被动回复处理</span></span>
<span class="line"><span>│   │   ├── active_reply.py     # 主动回复处理</span></span>
<span class="line"><span>│   │   └── common.py          # 公共方法</span></span>
<span class="line"><span>│   ├── chat_channel.py     # 通用聊天通道</span></span>
<span class="line"><span>│   ├── chat_message.py     # 聊天消息处理</span></span>
<span class="line"><span>│   └── channel_factory.py   # 通道管理</span></span>
<span class="line"><span>└── infra/</span></span>
<span class="line"><span>    ├── deploy/        # 部署配置</span></span>
<span class="line"><span>    │   └── scripts/    # 部署脚本</span></span>
<span class="line"><span>    │       ├── start.sh     # 启动脚本</span></span>
<span class="line"><span>    │       ├── shutdown.sh # 关闭脚本</span></span>
<span class="line"><span>    │       └── restart.sh  # 重启脚本</span></span>
<span class="line"><span>    ├── app.py           # 主程序</span></span>
<span class="line"><span>    └── monitoring/    # 监控体系</span></span>
<span class="line"><span>        ├── loki/      # 日志管理</span></span>
<span class="line"><span>        └── pyroscope/ # 持续性能分析</span></span>
<span class="line"><span>├── config.py  # 全局配置管理</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/data/                  # 服务器根目录独立存储</span></span>
<span class="line"><span>├── raw/                # 原始数据</span></span>
<span class="line"><span>│   ├── website/        # 网站</span></span>
<span class="line"><span>│   ├── wechat/         # 微信公众号</span></span>
<span class="line"><span>│   ├── campus_market/  # 校园集市</span></span>
<span class="line"><span>│   ├── xiaohongshu/    # 小红书</span></span>
<span class="line"><span>│   ├── weibo/          # 微博</span></span>
<span class="line"><span>│   ├── douyin/         # 抖音</span></span>
<span class="line"><span>│   ├── bilibili/       # B站</span></span>
<span class="line"><span>│   ├── zhihu/          # 知乎</span></span>
<span class="line"><span>│   ├── volunteer/      # 志愿者团队贡献</span></span>
<span class="line"><span>│   ├── user/           # 用户贡献数据</span></span>
<span class="line"><span>└── processed/</span></span>
<span class="line"><span>    ├── structured/    # 结构化数据（DuckDB）</span></span>
<span class="line"><span>    └── vector/       # 向量数据（Coze同步）</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`text</span></span>
<span class="line"><span></span></span>
<span class="line"><span>### 技术选型表</span></span>
<span class="line"><span></span></span>
<span class="line"><span>| 模块 | 子模块 | 技术栈 | 版本 | 选型依据 |</span></span>
<span class="line"><span>| --- | --- | --- | --- | --- |</span></span>
<span class="line"><span>| **爬虫引擎** | 混合采集架构 | Playwright + Selenium | 1.42.0 / 4.18.0 | 双引擎覆盖现代SPA与传统网页场景，Playwright处理复杂DOM性能提升40% |</span></span>
<span class="line"><span>|                | 反爬解决方案       | Browserless + mitmproxy            | 2.7.0 / 10.1.0 | 分布式浏览器指纹混淆 + 公众号API流量镜像捕获能力 |</span></span>
<span class="line"><span>| **数据清洗**    | 数据清洗           | Pandera + DuckDB                  | 0.11.0 / 0.9.2 | 声明式数据验证框架 + 列式存储实时处理能力 |</span></span>
<span class="line"><span>| **消息队列**    | 用户贡献处理       | RabbitMQ                           | 3.13.0  | 支持AMQP 1.0协议，消息持久化与死信队列保障数据完整性 |</span></span>
<span class="line"><span></span></span>
<span class="line"><span>| **存储层**      | 对象存储           | SeaweedFS                          | 3.64    | 对象存储与文件系统统一接口，自动纠删码机制 |</span></span>
<span class="line"><span>|                | 元数据存储         | DuckDB                            | 0.9.2   | 支持Python原生OLAP查询，向量化执行引擎加速 |</span></span>
<span class="line"><span>| **任务调度**    | 分布式任务         | Celery + Redis                     | 5.3.6 / 7.2.4 | 支持优先级队列与任务状态追踪，Redis Streams保障消息可靠性 |</span></span>
<span class="line"><span>| **监控体系**    | 链路追踪          | OpenTelemetry                     | 1.24.0  | 统一观测数据标准，支持Metrics/Logs/Traces三支柱 |</span></span>
<span class="line"><span>| **核心组件**    | API网关           | Apache APISIX                     | 3.8.0   | 动态插件架构支持JWT鉴权/限流/熔断等策略热更新 |</span></span>
<span class="line"><span></span></span>
<span class="line"><span>| **Agent模块**  | API交互层         | FastAPI + HTTPX                    | 0.110.0 | 异步HTTP客户端支持SSE/WebSocket长连接 |</span></span>
<span class="line"><span>|                | 多模态处理        | Coze Multi-Modal API             | 2024.2  | 支持文生图/图生文多模态联合推理 |</span></span>
<span class="line"><span></span></span>
<span class="line"><span>| **微信服务**    | 消息路由          | FastAPI WebSocket                | 0.110.0 | 支持万人级并发消息推送，消息压缩率60%+ |</span></span>
<span class="line"><span>|                | 任务调度          | Celery                           | 5.3.6   | 支持定时任务与工作流编排，任务失败自动重试 |</span></span>
<span class="line"><span></span></span>
<span class="line"><span>| **基础设施**    | 容器编排          | Docker Compose                   | 2.24.5  | 支持服务依赖管理，开发-生产环境一致性保障 |</span></span>
<span class="line"><span>|                | 日志管理          | Loki + Promtail                  | 2.9.4   | 支持日志标签化索引，存储空间节省70% |</span></span>
<span class="line"><span></span></span>
<span class="line"><span>### 核心模块实现</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#### 爬虫架构实现方案</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`plantuml</span></span>
<span class="line"><span>@startuml</span></span>
<span class="line"><span>package &quot;采集策略路由&quot; #LightBlue {</span></span>
<span class="line"><span>    component &quot;动态检测&quot; as dynamic_detection</span></span>
<span class="line"><span>    component &quot;反爬分析&quot; as anti_spider</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>package &quot;采集引擎&quot; #LightGreen {</span></span>
<span class="line"><span>    component &quot;Playwright&quot; as playwright &lt;&lt;集群&gt;&gt;</span></span>
<span class="line"><span>    component &quot;Mitmproxy&quot; as mitmproxy</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>component &quot;Browserless&quot; as browserless</span></span>
<span class="line"><span></span></span>
<span class="line"><span>dynamic_detection --&gt; playwright : &quot;现代Web应用&quot;</span></span>
<span class="line"><span>dynamic_detection --&gt; mitmproxy : &quot;公众号流量捕获&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>playwright --&gt; browserless : &quot;浏览器实例池&quot;</span></span>
<span class="line"><span>@enduml</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`text</span></span>
<span class="line"><span></span></span>
<span class="line"><span>方案说明</span></span>
<span class="line"><span></span></span>
<span class="line"><span>1. playwright 处理现代Web应用（B站/小红书）</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2. mitmproxy 捕获公众号流量</span></span>
<span class="line"><span></span></span>
<span class="line"><span>3. browserless 实现IP轮换和浏览器指纹混淆</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#### 知识库入库流程</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`plantuml</span></span>
<span class="line"><span>@startuml</span></span>
<span class="line"><span>!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== 知识库入库流程标题 ====</span></span>
<span class="line"><span>skinparam titleFontSize 18</span></span>
<span class="line"><span>title 知识库入库流程\\n&lt;size:16&gt;数据质量保障体系&lt;/size&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>skinparam defaultFontName &quot;Microsoft YaHei&quot;</span></span>
<span class="line"><span>skinparam defaultFontSize 14</span></span>
<span class="line"><span>skinparam linetype ortho</span></span>
<span class="line"><span>left to right direction</span></span>
<span class="line"><span></span></span>
<span class="line"><span>title 知识库入库流程</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== 系统组件 ====</span></span>
<span class="line"><span>Container(etl, &quot;ETL引擎&quot;, &quot;Playwright+Selenium&quot;, &quot;多源数据采集&quot;)</span></span>
<span class="line"><span>Container(msg_broker, &quot;消息中枢&quot;, &quot;RabbitMQ&quot;, &quot;任务分发&quot;)</span></span>
<span class="line"><span>Container(quality_check, &quot;质量评估&quot;, &quot;Pandera&quot;, &quot;数据校验&quot;)</span></span>
<span class="line"><span>ContainerDb(knowledge_db, &quot;知识库&quot;, &quot;FAISS&quot;, &quot;向量化存储&quot;)</span></span>
<span class="line"><span>Container(volunteer_ui, &quot;志愿者界面&quot;, &quot;Web Admin&quot;, &quot;人工审核&quot;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== 数据流 ====</span></span>
<span class="line"><span>Rel(etl, msg_broker, &quot;原始数据推送&quot;, &quot;AMQP&quot;)</span></span>
<span class="line"><span>Rel(msg_broker, quality_check, &quot;待处理数据&quot;, &quot;AMQP&quot;)</span></span>
<span class="line"><span>Rel(quality_check, knowledge_db, &quot;合格数据入库&quot;, &quot;gRPC&quot;)</span></span>
<span class="line"><span>Rel(quality_check, volunteer_ui, &quot;待审核数据&quot;, &quot;HTTP&quot;)</span></span>
<span class="line"><span>Rel(volunteer_ui, knowledge_db, &quot;人工校准数据&quot;, &quot;Admin API&quot;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>note right of quality_check</span></span>
<span class="line"><span>&lt;color:#00796B&gt;**质量评估标准**</span></span>
<span class="line"><span></span></span>
<span class="line"><span>1. 信息完整性</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2. 时效性验证</span></span>
<span class="line"><span></span></span>
<span class="line"><span>3. 来源可信度</span></span>
<span class="line"><span></span></span>
<span class="line"><span>4. 重复性检测</span></span>
<span class="line"><span></span></span>
<span class="line"><span>end note</span></span>
<span class="line"><span></span></span>
<span class="line"><span>note bottom of knowledge_db</span></span>
<span class="line"><span>&lt;color:#D84315&gt;**版本控制策略**</span></span>
<span class="line"><span></span></span>
<span class="line"><span>1. 每日增量更新</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2. 每周全量快照</span></span>
<span class="line"><span></span></span>
<span class="line"><span>3. 志愿者可回滚任意版本</span></span>
<span class="line"><span></span></span>
<span class="line"><span>end note</span></span>
<span class="line"><span>@enduml</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`text</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#### 用户贡献管道</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`plantuml</span></span>
<span class="line"><span>@startuml</span></span>
<span class="line"><span>!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml</span></span>
<span class="line"><span></span></span>
<span class="line"><span>skinparam defaultFontName &quot;Microsoft YaHei&quot;</span></span>
<span class="line"><span>skinparam defaultFontSize 14</span></span>
<span class="line"><span>skinparam wrapWidth 200</span></span>
<span class="line"><span>skinparam nodeFontSize 12</span></span>
<span class="line"><span>skinparam linetype ortho</span></span>
<span class="line"><span>left to right direction</span></span>
<span class="line"><span>&#39; ==== 系统边界定义 ====</span></span>
<span class="line"><span>System_Boundary(user_layer, &quot;用户端&quot;)  {</span></span>
<span class="line"><span>    Person(user, &quot;用户&quot;, &quot;提交学习资料&quot;, $sprite=&quot;person2&quot;, $tags=&quot;user&quot;)</span></span>
<span class="line"><span>    Container(wechat_mini, &quot;微信小程序&quot;, &quot;微信生态接入&quot;, $tags=&quot;client&quot;)</span></span>
<span class="line"><span>    Container(web_upload, &quot;Web上传&quot;, &quot;网页端服务&quot;, $tags=&quot;client&quot;)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>System_Boundary(access_layer, &quot;接入层&quot;) {</span></span>
<span class="line"><span>    Container(msg_queue, &quot;消息队列&quot;, &quot;RabbitMQ&quot;, &quot;异步任务处理&quot;, $tags=&quot;mq&quot;)</span></span>
<span class="line"><span>    Container(auth_service, &quot;鉴权服务&quot;, &quot;JWT&quot;, &quot;身份验证与授权&quot;, $tags=&quot;auth&quot;)</span></span>
<span class="line"><span>    Container(preprocessor, &quot;预处理器&quot;, &quot;Python&quot;, &quot;数据标准化&quot;, $tags=&quot;processor&quot;)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>System_Boundary(process_layer, &quot;处理层&quot;) {</span></span>
<span class="line"><span>    ContainerDb(duckdb, &quot;DuckDB&quot;, &quot;结构化元数据&quot;, &quot;嵌入式OLAP数据库&quot;, $tags=&quot;core_db&quot;)</span></span>
<span class="line"><span>    Container(format_conv, &quot;格式转换&quot;, &quot;Pandoc&quot;, &quot;统一Markdown格式&quot;, $tags=&quot;processor&quot;)</span></span>
<span class="line"><span>    Container(quality_check, &quot;质量检测&quot;, &quot;Pandera&quot;, &quot;数据质量校验&quot;, $tags=&quot;quality&quot;)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== 样式定义 ====</span></span>
<span class="line"><span>AddElementTag(&quot;user_layer&quot;, $fontColor=&quot;#1E88E5&quot;, $borderColor=&quot;#64B5F6&quot;, $bgColor=&quot;#BBDEFB&quot;)</span></span>
<span class="line"><span>AddElementTag(&quot;access_layer&quot;, $fontColor=&quot;#43A047&quot;, $borderColor=&quot;#66BB6A&quot;, $bgColor=&quot;#C8E6C9&quot;)</span></span>
<span class="line"><span>AddElementTag(&quot;process_layer&quot;, $fontColor=&quot;#FB8C00&quot;, $borderColor=&quot;#FFA726&quot;, $bgColor=&quot;#FFE0B2&quot;)</span></span>
<span class="line"><span>AddElementTag(&quot;core_db&quot;, $fontColor=&quot;#BF360C&quot;, $borderColor=&quot;#D84315&quot;, $bgColor=&quot;#FFCCBC&quot;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== 数据流关系 ====</span></span>
<span class="line"><span>Rel(user, wechat_mini, &quot;提交资料&quot;, &quot;微信API&quot;)</span></span>
<span class="line"><span>Rel(wechat_mini, auth_service, &quot;身份认证&quot;, &quot;JWT&quot;)</span></span>
<span class="line"><span>Rel(auth_service, msg_queue, &quot;投递任务&quot;, &quot;AMQP&quot;)</span></span>
<span class="line"><span>Rel(msg_queue, preprocessor, &quot;消费任务&quot;, &quot;AMQP&quot;)</span></span>
<span class="line"><span>Rel(preprocessor, format_conv, &quot;标准化处理&quot;, &quot;HTTP&quot;)</span></span>
<span class="line"><span>Rel(format_conv, quality_check, &quot;格式校验&quot;, &quot;HTTP&quot;)</span></span>
<span class="line"><span>Rel(quality_check, duckdb, &quot;存储元数据&quot;, &quot;DuckDB API&quot;)</span></span>
<span class="line"><span>Rel(quality_check, seaweedfs, &quot;存储文件&quot;, &quot;SeaweedFS API&quot;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>note right of msg_queue</span></span>
<span class="line"><span>&lt;color=&quot;#00796B&gt;**消息处理规范**</span></span>
<span class="line"><span></span></span>
<span class="line"><span>1. 消息持久化</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2. 自动重试机制</span></span>
<span class="line"><span></span></span>
<span class="line"><span>3. 优先级队列</span></span>
<span class="line"><span></span></span>
<span class="line"><span>end note</span></span>
<span class="line"><span></span></span>
<span class="line"><span>note left of duckdb</span></span>
<span class="line"><span>&lt;color=&quot;#D84315&gt;**元数据规范**</span></span>
<span class="line"><span></span></span>
<span class="line"><span>1. 文件哈希值</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2. 贡献者信息</span></span>
<span class="line"><span></span></span>
<span class="line"><span>3. 时间戳</span></span>
<span class="line"><span></span></span>
<span class="line"><span>end note</span></span>
<span class="line"><span>@enduml</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`text</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#### agent交互</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`plantuml</span></span>
<span class="line"><span>@startuml</span></span>
<span class="line"><span>!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== Agent交互标题 ====</span></span>
<span class="line"><span>skinparam titleFontSize 18</span></span>
<span class="line"><span>title 智能Agent交互架构\\n&lt;size:16&gt;多模态协同工作流&lt;/size&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>skinparam defaultFontName &quot;Microsoft YaHei&quot;</span></span>
<span class="line"><span>skinparam defaultFontSize 14</span></span>
<span class="line"><span></span></span>
<span class="line"><span>title 智能Agent交互架构</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Component(ai_agent, &quot;智能Agent&quot;, &quot;Coze&quot;, &quot;多模态处理核心&quot;)</span></span>
<span class="line"><span>ComponentDb(knowledge_base, &quot;知识库&quot;, &quot;FAISS&quot;)</span></span>
<span class="line"><span>Component(plugin_mgr, &quot;插件管理器&quot;, &quot;Python&quot;)</span></span>
<span class="line"><span>Component(user_interface, &quot;用户界面&quot;, &quot;多平台终端&quot;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== 数据流 ====</span></span>
<span class="line"><span>Rel(user_interface, ai_agent, &quot;用户请求&quot;, &quot;HTTP/WebSocket&quot;)</span></span>
<span class="line"><span>Rel(ai_agent, knowledge_base, &quot;RAG检索&quot;, &quot;gRPC&quot;)</span></span>
<span class="line"><span>Rel(ai_agent, plugin_mgr, &quot;插件调用&quot;, &quot;Coze API&quot;)</span></span>
<span class="line"><span>Rel(plugin_mgr, user_interface, &quot;插件响应&quot;, &quot;HTTP&quot;)</span></span>
<span class="line"><span>Rel(ai_agent, user_interface, &quot;生成响应&quot;, &quot;SSE&quot;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>note right of ai_agent</span></span>
<span class="line"><span>&lt;color:#673AB7&gt;**处理流程**</span></span>
<span class="line"><span></span></span>
<span class="line"><span>1. 解析用户意图</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2. RAG增强检索</span></span>
<span class="line"><span></span></span>
<span class="line"><span>3. 多模态处理</span></span>
<span class="line"><span></span></span>
<span class="line"><span>4. 插件协同工作</span></span>
<span class="line"><span></span></span>
<span class="line"><span>end note</span></span>
<span class="line"><span></span></span>
<span class="line"><span>note left of plugin_mgr</span></span>
<span class="line"><span>&lt;color:#43A047&gt;**插件类型**</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 搜索引擎</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 创意生图</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 数据分析</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 校历查询</span></span>
<span class="line"><span>end note</span></span>
<span class="line"><span>@enduml</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`text</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#### web服务</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`plantuml</span></span>
<span class="line"><span>@startuml</span></span>
<span class="line"><span>!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== Web服务标题 ====</span></span>
<span class="line"><span>skinparam titleFontSize 18</span></span>
<span class="line"><span>title Web服务架构\\n&lt;size:16&gt;高可用分布式系统&lt;/size&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>skinparam defaultFontName &quot;Microsoft YaHei&quot;</span></span>
<span class="line"><span>skinparam defaultFontSize 14</span></span>
<span class="line"><span>skinparam linetype ortho</span></span>
<span class="line"><span></span></span>
<span class="line"><span>title Web服务架构</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Container(api_gateway, &quot;API网关&quot;, &quot;APISIX&quot;, &quot;流量控制&quot;)</span></span>
<span class="line"><span>Container(web_service, &quot;Web服务&quot;, &quot;FastAPI&quot;, &quot;业务逻辑&quot;)</span></span>
<span class="line"><span>Container(task_worker, &quot;Celery Worker&quot;, &quot;分布式任务&quot;)</span></span>
<span class="line"><span>ContainerDb(redis, &quot;Redis&quot;, &quot;任务队列&quot;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&#39; ==== 数据流 ====</span></span>
<span class="line"><span>Rel_U(api_gateway, web_service, &quot;路由请求&quot;, &quot;HTTP/2&quot;)</span></span>
<span class="line"><span>Rel(web_service, task_worker, &quot;异步任务&quot;, &quot;Redis&quot;)</span></span>
<span class="line"><span>Rel(task_worker, redis, &quot;任务状态存储&quot;, &quot;Redis协议&quot;)</span></span>
<span class="line"><span>Rel(web_service, redis, &quot;会话缓存&quot;, &quot;RESP&quot;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>note right of api_gateway</span></span>
<span class="line"><span>&lt;color:#1E88E5&gt;**网关功能**</span></span>
<span class="line"><span></span></span>
<span class="line"><span>1. 限流熔断</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2. JWT验证</span></span>
<span class="line"><span></span></span>
<span class="line"><span>3. 请求路由</span></span>
<span class="line"><span></span></span>
<span class="line"><span>end note</span></span>
<span class="line"><span></span></span>
<span class="line"><span>note left of task_worker</span></span>
<span class="line"><span>&lt;color:#D81B60&gt;**任务类型**</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 文件处理</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 数据清洗</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 通知发送</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 定时任务</span></span>
<span class="line"><span>end note</span></span>
<span class="line"><span>@enduml</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`text</span></span>
<span class="line"><span></span></span>
<span class="line"><span>### 部署规范</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Docker Compose配置</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`yaml</span></span>
<span class="line"><span>version: &#39;3.8&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>services:</span></span>
<span class="line"><span>  apisix:</span></span>
<span class="line"><span>    image: apache/apisix:3.8.0-alpine</span></span>
<span class="line"><span>    ports:</span></span>
<span class="line"><span>      - &quot;9080:9080&quot;</span></span>
<span class="line"><span>      - &quot;9180:9180&quot;</span></span>
<span class="line"><span>    volumes:</span></span>
<span class="line"><span>      - ./apisix/config.yaml:/usr/local/apisix/conf/config.yaml</span></span>
<span class="line"><span>    networks:</span></span>
<span class="line"><span>      - nkuwiki-net</span></span>
<span class="line"><span>    depends_on:</span></span>
<span class="line"><span>      redis:</span></span>
<span class="line"><span>        condition: service_healthy</span></span>
<span class="line"><span>      rabbitmq:</span></span>
<span class="line"><span>        condition: service_healthy</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  web:</span></span>
<span class="line"><span>    image: nkuwiki/web:v1.2</span></span>
<span class="line"><span>    env_file: .env</span></span>
<span class="line"><span>    networks:</span></span>
<span class="line"><span>      - nkuwiki-net</span></span>
<span class="line"><span>    healthcheck:</span></span>
<span class="line"><span>      test: [&quot;CMD&quot;, &quot;curl&quot;, &quot;-f&quot;, &quot;http://localhost:8000/health&quot;]</span></span>
<span class="line"><span>      interval: 30s</span></span>
<span class="line"><span>      timeout: 10s</span></span>
<span class="line"><span>      retries: 3</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  celery_worker:</span></span>
<span class="line"><span>    image: nkuwiki/worker:v1.1</span></span>
<span class="line"><span>    env_file: .env</span></span>
<span class="line"><span>    command: celery -A services.wechat.celery_app worker --loglevel=info</span></span>
<span class="line"><span>    depends_on:</span></span>
<span class="line"><span>      redis:</span></span>
<span class="line"><span>        condition: service_healthy</span></span>
<span class="line"><span>      rabbitmq:</span></span>
<span class="line"><span>        condition: service_healthy</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  redis:</span></span>
<span class="line"><span>    image: redis:7.2.4-alpine</span></span>
<span class="line"><span>    ports:</span></span>
<span class="line"><span>      - &quot;6379:6379&quot;</span></span>
<span class="line"><span>    volumes:</span></span>
<span class="line"><span>      - redis_data:/data</span></span>
<span class="line"><span>    healthcheck:</span></span>
<span class="line"><span>      test: [&quot;CMD&quot;, &quot;redis-cli&quot;, &quot;ping&quot;]</span></span>
<span class="line"><span>      interval: 10s</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  rabbitmq:</span></span>
<span class="line"><span>    image: rabbitmq:3.13.0-management-alpine</span></span>
<span class="line"><span>    environment:</span></span>
<span class="line"><span>      RABBITMQ_DEFAULT_USER: \${RABBITMQ_USER}</span></span>
<span class="line"><span>      RABBITMQ_DEFAULT_PASS: \${RABBITMQ_PASS}</span></span>
<span class="line"><span>    ports:</span></span>
<span class="line"><span>      - &quot;5672:5672&quot;</span></span>
<span class="line"><span>      - &quot;15672:15672&quot;</span></span>
<span class="line"><span>    volumes:</span></span>
<span class="line"><span>      - rabbitmq_data:/var/lib/rabbitmq</span></span>
<span class="line"><span>    healthcheck:</span></span>
<span class="line"><span>      test: [&quot;CMD&quot;, &quot;rabbitmq-diagnostics&quot;, &quot;check_running&quot;]</span></span>
<span class="line"><span>      interval: 30s</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  seaweedfs:</span></span>
<span class="line"><span>    image: chrislusf/seaweedfs:3.64</span></span>
<span class="line"><span>    ports:</span></span>
<span class="line"><span>      - &quot;9333:9333&quot;  # Master</span></span>
<span class="line"><span>      - &quot;8080:8080&quot;  # Volume</span></span>
<span class="line"><span>    command: &quot;server -dir=/data&quot;</span></span>
<span class="line"><span>    volumes:</span></span>
<span class="line"><span>      - seaweedfs_data:/data</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  otel_collector:</span></span>
<span class="line"><span>    image: otel/opentelemetry-collector-contrib:0.96.0</span></span>
<span class="line"><span>    volumes:</span></span>
<span class="line"><span>      - ./infrastructure/monitoring/otel-config.yaml:/etc/otelcol/config.yaml</span></span>
<span class="line"><span>    ports:</span></span>
<span class="line"><span>      - &quot;4317:4317&quot; # OTLP gRPC</span></span>
<span class="line"><span>      - &quot;4318:4318&quot; # OTLP HTTP</span></span>
<span class="line"><span></span></span>
<span class="line"><span>volumes:</span></span>
<span class="line"><span>  redis_data:</span></span>
<span class="line"><span>  rabbitmq_data:</span></span>
<span class="line"><span>  seaweedfs_data:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>networks:</span></span>
<span class="line"><span>  nkuwiki-net:</span></span>
<span class="line"><span>    driver: bridge</span></span>
<span class="line"><span>    attachable: true</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 反向代理配置（可选）</span></span>
<span class="line"><span></span></span>
<span class="line"><span># traefik:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#   image: traefik:v2.11</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#   ports:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#     - &quot;80:80&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#     - &quot;443:443&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#   volumes:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#     - /var/run/docker.sock:/var/run/docker.sock:ro</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`text</span></span>
<span class="line"><span></span></span>
<span class="line"><span>部署说明：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>1. 使用\`env_file\`管理敏感配置（需创建.env文件）</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2. 健康检查机制保障服务启动顺序</span></span>
<span class="line"><span></span></span>
<span class="line"><span>3. 独立存储卷实现数据持久化</span></span>
<span class="line"><span></span></span>
<span class="line"><span>4. OpenTelemetry Collector实现统一监控</span></span>
<span class="line"><span></span></span>
<span class="line"><span>## 📚 文档维护</span></span>
<span class="line"><span></span></span>
<span class="line"><span>| 版本 | 日期       | 修改人   | 变更描述               |</span></span>
<span class="line"><span>|------|------------|----------|-----------------------|</span></span>
<span class="line"><span>| 1.0  | 2025-02-03 | aokimi   | 初稿       |</span></span>
<span class="line"><span>| 1.1  | 2025-02-05 | aokimi   | 爬虫架构全面转向Playwright|</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8)]))}const v=s(p,[["render",e],["__file","nkuwiki_dev.html.vue"]]),t=JSON.parse('{"path":"/docs/nkuwiki_dev.html","title":"📚nkuwiki开发文档","lang":"zh-CN","frontmatter":{"description":"📚nkuwiki开发文档 🎯 愿景与目标 我们致力于构建南开知识共同体，践行 开源·共治·普惠 三位一体价值体系 （🔓 技术开源透明 + 🤝 社区协同共治 + 🆓 服务永久普惠），实现： 🚀 消除南开学子信息差距 💡 开放知识资源免费获取 🌱 构建可持续的互助社区 项目亮点： 🤖 开源知识中枢 🧠 双擎驱动：RAG框架 + SOTA...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/docs/nkuwiki_dev.html"}],["meta",{"property":"og:site_name","content":"南开WIKI"}],["meta",{"property":"og:title","content":"📚nkuwiki开发文档"}],["meta",{"property":"og:description","content":"📚nkuwiki开发文档 🎯 愿景与目标 我们致力于构建南开知识共同体，践行 开源·共治·普惠 三位一体价值体系 （🔓 技术开源透明 + 🤝 社区协同共治 + 🆓 服务永久普惠），实现： 🚀 消除南开学子信息差距 💡 开放知识资源免费获取 🌱 构建可持续的互助社区 项目亮点： 🤖 开源知识中枢 🧠 双擎驱动：RAG框架 + SOTA..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-27T00:38:50.000Z"}],["meta",{"property":"article:modified_time","content":"2025-03-27T00:38:50.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"📚nkuwiki开发文档\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-03-27T00:38:50.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Because\\",\\"url\\":\\"https://github.com/Because66666\\"}]}"]]},"git":{"createdTime":1743035930000,"updatedTime":1743035930000,"contributors":[{"name":"Because66666","username":"Because66666","email":"z66666z@163.com","commits":1,"url":"https://github.com/Because66666"}]},"readingTime":{"minutes":13.34,"words":4001},"filePathRelative":"docs/nkuwiki_dev.md","localizedDate":"2025年3月27日","autoDesc":true}');export{v as comp,t as data};
