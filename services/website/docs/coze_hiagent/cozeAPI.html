<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.74" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://vuepress-theme-hope-docs-demo.netlify.app/docs/coze_hiagent/cozeAPI.html"><meta property="og:site_name" content="南开WIKI"><meta property="og:title" content="cozeAPI介绍"><meta property="og:description" content="随着字节在大模型军备竞赛中一骑绝尘，越来越多的小伙伴开始注意到扣子（COZE）这个强大的智能体工作流搭建平台。然而，不得不说，扣子的官方教程实在是出了名的草率，既没有示例代码，排版布局也十分混乱，扣子基础版、扣子专业版、豆包大模型、火山引擎、火山方舟让人傻傻分不清楚，混乱程度简直令人咋舌。 本文将提供官方文档没有提供的调用 COZE BOT API 的..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-04-01T07:14:53.000Z"><meta property="article:author" content="aokimi"><meta property="article:modified_time" content="2025-04-01T07:14:53.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"cozeAPI介绍","image":[""],"dateModified":"2025-04-01T07:14:53.000Z","author":[{"@type":"Person","name":"aokimi"}]}</script><title>cozeAPI介绍 | 南开WIKI</title><meta name="description" content="随着字节在大模型军备竞赛中一骑绝尘，越来越多的小伙伴开始注意到扣子（COZE）这个强大的智能体工作流搭建平台。然而，不得不说，扣子的官方教程实在是出了名的草率，既没有示例代码，排版布局也十分混乱，扣子基础版、扣子专业版、豆包大模型、火山引擎、火山方舟让人傻傻分不清楚，混乱程度简直令人咋舌。 本文将提供官方文档没有提供的调用 COZE BOT API 的...">
    <link rel="preload" href="/assets/style-fHUuFwQE.css" as="style"><link rel="stylesheet" href="/assets/style-fHUuFwQE.css">
    <link rel="modulepreload" href="/assets/app-CBln_ck3.js"><link rel="modulepreload" href="/assets/cozeAPI.html-BHvoocIQ.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-DxoaFqWO.js" as="script"><link rel="prefetch" href="/assets/index.html-qhI3fFBT.js" as="script"><link rel="prefetch" href="/assets/api_docs.html-CULoUwNd.js" as="script"><link rel="prefetch" href="/assets/configuration_guide.html-CqrQ1EwP.js" as="script"><link rel="prefetch" href="/assets/deployment_guide.html-BffvfWR0.js" as="script"><link rel="prefetch" href="/assets/installation_guide.html-ByQNKfXt.js" as="script"><link rel="prefetch" href="/assets/nkuwiki_dev.html-C-Ckz0GX.js" as="script"><link rel="prefetch" href="/assets/qa_service_guide.html-0kFP_qGM.js" as="script"><link rel="prefetch" href="/assets/index.html-Dts6R3SB.js" as="script"><link rel="prefetch" href="/assets/redis_guide.html-D-kBdg3A.js" as="script"><link rel="prefetch" href="/assets/data_source.html-DKDH_np2.js" as="script"><link rel="prefetch" href="/assets/introduction.html-BQ7JxCKq.js" as="script"><link rel="prefetch" href="/assets/life.html-Fg9aYTCY.js" as="script"><link rel="prefetch" href="/assets/links.html-CcERvTPG.js" as="script"><link rel="prefetch" href="/assets/map.html-CLFcnXnH.js" as="script"><link rel="prefetch" href="/assets/nkuwiki_build.html-DGwnX-Sz.js" as="script"><link rel="prefetch" href="/assets/index.html-CdClnnsn.js" as="script"><link rel="prefetch" href="/assets/used_files.html-BeQgY5rH.js" as="script"><link rel="prefetch" href="/assets/word.html-Bencwd9W.js" as="script"><link rel="prefetch" href="/assets/HiagentAPI.html-BeADRYRF.js" as="script"><link rel="prefetch" href="/assets/mysql_api.html-DqWZ0Pu8.js" as="script"><link rel="prefetch" href="/assets/QA.html-Be3whA5J.js" as="script"><link rel="prefetch" href="/assets/404.html-YAxCRrLV.js" as="script"><link rel="prefetch" href="/assets/index.html-DsrkWHje.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-DXWKOczD.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-QXEOFQJV-BDAK4jqp.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="带我回家"><img class="vp-nav-logo" src="/favicon.ico" alt><!----><span class="vp-site-name hide-in-pad">南开WIKI</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="主页" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:house" height="1em" sizing="height"></iconify-icon><!--]-->主页<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/docx/" aria-label="目录" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:laptop-code" height="1em" sizing="height"></iconify-icon><!--]-->目录<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/docs/" aria-label="开发文档" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:book" height="1em" sizing="height"></iconify-icon><!--]-->开发文档<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/communicate/" aria-label="联系" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="majesticons:file" height="1em" sizing="height"></iconify-icon><!--]-->联系<!----></a></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/NKU-WIKI/nkuwiki" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="主页" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:house" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->主页<!----></a></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header clickable"><iconify-icon class="vp-icon" icon="fa6-solid:laptop-code" width="1em" height="1em" sizing="both"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/docx/" aria-label="目录" iconsizing="both"><!---->目录<!----></a><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/docx/word.html" aria-label="常用文档" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:book-plus" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->常用文档<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docx/introduction.html" aria-label="简介" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:book-plus" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->简介<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docx/data_source.html" aria-label="数据源重点实体清单" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:book-plus" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->数据源重点实体清单<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docx/life.html" aria-label="南开新生指南" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:book-plus" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->南开新生指南<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docx/links.html" aria-label="常用链接" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:book-plus" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->常用链接<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docx/used_files.html" aria-label="南开常用文件" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:file" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->南开常用文件<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docx/map.html" aria-label="地图" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:book-plus" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->地图<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docx/nkuwiki_build.html" aria-label="nku-wiki建设" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:book-plus" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->nku-wiki建设<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header clickable active"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><a class="route-link route-link-active auto-link vp-sidebar-title no-external-link-icon" href="/docs/" aria-label="开发文档" iconsizing="both"><!---->开发文档<!----></a><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/docs/" aria-label="南开Wiki RAG接口文档" iconsizing="both"><!---->南开Wiki RAG接口文档<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/nkuwiki_dev.html" aria-label="📚nkuwiki开发文档" iconsizing="both"><!---->📚nkuwiki开发文档<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/api_docs.html" aria-label="南开Wiki API文档" iconsizing="both"><!---->南开Wiki API文档<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Coze&amp;hiagent</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/docs/coze_hiagent/QA.html" aria-label="/docs/coze_hiagent/QA.html" iconsizing="both"><!---->/docs/coze_hiagent/QA.html<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/coze_hiagent/HiagentAPI.html" aria-label="Coze 智能体后端 API 文档" iconsizing="both"><!---->Coze 智能体后端 API 文档<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/docs/coze_hiagent/cozeAPI.html" aria-label="cozeAPI介绍" iconsizing="both"><!---->cozeAPI介绍<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/coze_hiagent/mysql_api.html" aria-label="MySQL API 接口文档" iconsizing="both"><!---->MySQL API 接口文档<!----></a></li></ul></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/installation_guide.html" aria-label="nkuwiki 安装指南" iconsizing="both"><!---->nkuwiki 安装指南<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/deployment_guide.html" aria-label="nkuwiki 部署指南" iconsizing="both"><!---->nkuwiki 部署指南<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/configuration_guide.html" aria-label="nkuwiki 配置指南" iconsizing="both"><!---->nkuwiki 配置指南<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/qa_service_guide.html" aria-label="nkuwiki 问答服务使用指南" iconsizing="both"><!---->nkuwiki 问答服务使用指南<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/redis_guide.html" aria-label="Redis配置与使用指南" iconsizing="both"><!---->Redis配置与使用指南<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">联系我们</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/communicate/" aria-label="联系" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:file" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->联系<!----></a></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->cozeAPI介绍</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">aokimi</span></span><span property="author" content="aokimi"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2025年3月27日</span><meta property="datePublished" content="2025-03-27T00:38:50.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 9 分钟</span><meta property="timeRequired" content="PT9M"></span><!----><!----></div><hr></div><!----><!----><div class="theme-hope-content" vp-content><p>随着字节在大模型军备竞赛中一骑绝尘，越来越多的小伙伴开始注意到扣子（COZE）这个强大的智能体工作流搭建平台。然而，不得不说，扣子的官方教程实在是出了名的草率，既没有示例代码，排版布局也十分混乱，扣子基础版、扣子专业版、豆包大模型、火山引擎、火山方舟让人傻傻分不清楚，混乱程度简直令人咋舌。</p><p>本文将提供官方文档没有提供的调用 COZE BOT API 的 Python 代码，关于豆包大模型的调用将在另一篇中详述。</p><p>一、基础知识<br> 首先，扣子分为国内版和海外版，可以调用基础模型不一样，比如海外版可以调用Chat-GPT，但国内版不行。不过，海外版需要用到梯子，所以我们还是先以国内版为例，国内版的官网是这个：</p><p>扣子-AI 智能体开发平台<br><a href="http://xn--www-4m0a.coze.cn/" target="_blank" rel="noopener noreferrer">​www.coze.cn/</a><br> 国内版又分为基础版和专业版（国外版好像是不分的），专业版和基础版登录的入口是不同的，而且你同一个账号下的专业版和基础版是不互通的，也就是说你在基础版里创建的智能体，不会自动出现在专业版的账号里，虽然可以进行迁移，但只能迁移一次，这点是最神奇的。</p><p>专业版和基础版在API调用限制上的区别如下：</p><p>基础版 专业版<br> COZE国内版API 2024年8月15日之后，扣子 API 的免费额度为每个账号 100 次 API 调用。一旦累计调用次数超过免费额度，此账号将无法继续使用任何扣子 API。<br> API 免费额度不适用于通过扣子平台、其他发布渠道或 SDK 产生的请求。 不限制 API 调用次数。<br> 调用发起对话、执行工作流或执行工作流（流式响应）API，根据 Bot 调用次数和方舟模型 Token 消耗收取费用；调用恢复运行工作流，仅根据方舟模型 Token 消耗收取费用；调用其他接口免费。<br> 总结起来就是，免费版有调用次数限制，且总共只有100次。所以如果100次不够用的小伙伴，就只能选择专业版了。</p><p>值得一提的是，专业版每次调用的收费分为两部分：</p><p>bot调用次数，就是调用一次智能体收一次费；<br> 智能体消耗的token数，就是看你智能体里用到的大语言模型消耗的token，这一点和单独调用豆包一样；<br> 不过，虽然是两道收费，但其实也不贵。首先，字节的大模型token收费可以说是国内所有大模型里的地板价了，比那些小厂的甚至可以低2个数量级；其次，智能体调用收费好像是调用一次扣2点，但现在有优惠，50万点1块钱，所以这个费用也就忽略不计了。</p><p>二、创建智能体<br> 本篇文章主要是讲如何通过API来调用你已经创建好的智能体，所以创建智能体的部分就不再赘述啦，网上教程也越来越多，COZE在B站也有官方教程，可以参考一下：</p><p>扣子Coze个人主页<br><a href="http://xn--space-kt3b.bilibili.com/1444391473" target="_blank" rel="noopener noreferrer">​space.bilibili.com/1444391473</a><br> 注意，记得在专业版里创建，因为基础版里创建的话你只有100次的API调用机会。</p><p>专业版里的智能体调用大语言模型需要你创建接入点，这个我会另外出一个教程。</p><p>三、调用的前置准备<br> 在调用COZE的API之前，确保你完成了以下两件事：</p><p>发布 Bot 为 API 服务，发布 Bot 时一定要勾选“Bot as API”；<br> 获取访问令牌，这个在调用API时需要用到；<br> 具体可以参考这个官方文档：</p><p>扣子 - 开发指南 - 准备工作<br><a href="http://xn--www-4m0a.coze.cn/docs/developer_guides/preparation" target="_blank" rel="noopener noreferrer">​www.coze.cn/docs/developer_guides/preparation</a><br> 四、用Python调用Bot API<br> 好，重头戏来了。</p><p>虽然扣子的官方文档写的不咋地，但我还是礼貌性地提供一下，毕竟先看官方文档是一个好习惯：</p><p>扣子 - 开发指南<br><a href="http://xn--www-4m0a.coze.cn/docs/developer_guides/coze_api_overview" target="_blank" rel="noopener noreferrer">​www.coze.cn/docs/developer_guides/coze_api_overview</a><br> （一）导入必要的库<br> import re<br> import requests<br> import json<br> import time<br> import sys<br> 这几个是基础的，当然可能还有其他的，根据你的需求来。</p><p>（二）准备ID信息<br> bot_id = &quot;你的BOT-ID&quot;<br> access_token = &#39;Bearer pat_你的访问令牌&#39;<br> user_id = &quot;你的USER-ID&quot;<br> 如何获取bot_id和user_id：打开你的智能体编辑界面，网址的结构应该是这样的：</p><p><a href="https://www.coze.cn/space/%22%E4%BD%A0%E7%9A%84USER-ID%22/bot/%22%E4%BD%A0%E7%9A%84BOT-ID%22" target="_blank" rel="noopener noreferrer">https://www.coze.cn/space/&quot;你的USER-ID&quot;/bot/&quot;你的BOT-ID&quot;</a><br> 如何获取access_token：请参考上述“三、调用的前置准备”，请注意，令牌仅在生成时展示一次，请即刻复制并保存。另外，设置access_token 时不要忘记加上“Bearer pat_”的前缀。</p><p>（三）构建请求<br> api_url = &#39;<a href="https://api.coze.cn/v3/chat" target="_blank" rel="noopener noreferrer">https://api.coze.cn/v3/chat</a>&#39;<br> headers = {<br> &#39;Authorization&#39;: access_token,<br> &#39;Content-Type&#39;: &#39;application/json&#39;<br> }<br> body = {<br> &quot;bot_id&quot;: bot_id,<br> &quot;user_id&quot;: user_id,<br> &quot;stream&quot;: True,<br> &quot;auto_save_history&quot;: not(True),<br> &quot;additional_messages&quot;: messages<br> }<br> response = requests.post(api_url, headers=headers, json=body)<br> #print(response)<br> 这里要注意，stream为True时，auto_save_history只能为False；stream为False时，auto_save_history只能为True，否则会报错。</p><p>messages就是常规格式，比如：</p><p>messages = [<br> {&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;你是智能助手&quot;,},<br> {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;请回答我的问题&quot;,},<br> ]<br> （四）流式输出<br> 这里讲流式输出，我们先来了解一下流式输出的结构：</p><p>扣子 - 开发指南 - 流式输出结构<br><a href="http://xn--www-4m0a.coze.cn/docs/developer_guides/get_chat_response" target="_blank" rel="noopener noreferrer">​www.coze.cn/docs/developer_guides/get_chat_response</a><br> 流式输出的有效字段是在 event =&#39;conversation.message.delta&#39; 的前提下，data 返回值中的&quot;content&quot;，具体代码如下：</p><p>for line in response.iter_lines():<br> decoded_line = line.decode(&#39;utf-8&#39;,errors=&#39;ignore&#39;) #解码<br> #print(decoded_line)<br> if decoded_line.startswith(&quot;event:&quot;): #标记event<br> event = decoded_line[6:]<br> #print(event)<br> if decoded_line.startswith(&quot;data:&quot;):<br> event_data = json.loads(decoded_line[5:])<br> #print(event_data)<br> if event == &#39;conversation.message.delta&#39;: #流式输出标记<br> sys.stdout.write(event_data[&quot;content&quot;])<br> time.sleep(0.1)<br> 流式输出有个前提，就是你的智能体最后一步是大语言模型的输出，或者你的智能体有消息模块来展示大语言模型的流式输出结果。假如你的智能体本身就无法将结果流式输出，那么通过API也是无法办到的。具体的你可以在自己的智能体编辑页面尝试一下，看看是不是能够流式输出。</p><p>（五）非流式输出<br> 非流式输出反而更复杂一些。</p><p>你要设置 stream = false，auto_save_history=true，表示使用非流式响应，并记录历史消息。<br> 你需要记录会话的 Conversation ID 和 Chat ID，用于后续查看详细信息。<br> 定期轮询查看对话详情接口，建议每次间隔 1 秒以上，直到会话状态流转为终态，即 status 为 completed 或 required_action。<br> 调用查看对话消息详情接口，查询模型生成的最终结果。<br> 具体代码如下：</p><p>response = response.json()<br> #print(response)</p><p>conversation_id = response[&#39;data&#39;].get(&#39;conversation_id&#39;)<br> chat_id = response[&#39;data&#39;].get(&#39;id&#39;)<br> print(f&#39;Chat_ID:{conversation_id};\nConversation_ID:{conversation_id}&#39;)</p><p>retrieve_url = f&#39;<a href="https://api.coze.cn/v3/chat/retrieve?conversation_id=%7Bconversation_id%7D&amp;chat_id=%7Bchat_id%7D" target="_blank" rel="noopener noreferrer">https://api.coze.cn/v3/chat/retrieve?conversation_id={conversation_id}&amp;chat_id={chat_id}</a>&#39;<br> while requests.get(retrieve_url, headers=headers).json()[&#39;data&#39;][&#39;status&#39;] != &quot;completed&quot;:<br> time.sleep(0.5)<br> print(&quot;coze bot wait ......&quot;)</p><p>message_url = f&#39;<a href="https://api.coze.cn/v3/chat/message/list?chat_id=%7Bchat_id%7D&amp;conversation_id=%7Bconversation_id%7D" target="_blank" rel="noopener noreferrer">https://api.coze.cn/v3/chat/message/list?chat_id={chat_id}&amp;conversation_id={conversation_id}</a>&#39;<br> message_response = requests.get(message_url, headers=headers).json()<br> event_data_answer = message_response[&#39;data&#39;][1]<br> output = event_data_answer[&quot;content&quot;]<br> print(output)<br> 至此，COZE专业版API调用的核心部分就讲完啦，希望对大家有帮助。</p><p>（六）知识库召回结果<br> 如果你的智能体里面有用到知识库，那么 Coze Bot 的返回结果里是有知识库的RAG召回结果的，甚至还有召回内容所在知识库的页面link，如果你需要的话，可以通过下面的方式调用：</p><p>知识库的召回内容是在 event = &#39;conversation.message.completed&#39; 时（流式输出）且 event_data[&#39;type&#39;] = &#39;verbose&#39; 时，event_data_content[&quot;msg_type&quot;] = &quot;knowledge_recall&quot; 下的内容，具体地，我们可以写出如下函数来解析响应的内容：</p><p>def get_coze_rag(event_data):</p><pre><code>result = list()

if event_data[&#39;type&#39;]==&#39;verbose&#39;:
    
    event_data_content = json.loads(event_data[&quot;content&quot;])
    #print(json.dumps(event_data_content, indent=4,ensure_ascii=False))

    if event_data_content[&quot;msg_type&quot;]==&quot;knowledge_recall&quot;:
        event_data_content_data = json.loads(event_data_content[&quot;data&quot;])
        #print(json.dumps(event_data_content_data, indent=4,ensure_ascii=False))
        
        event_chunks = event_data_content_data[&#39;chunks&#39;]
        for event_chunk in event_chunks:
            knowledge_slice = event_chunk[&#39;slice&#39;]
            result.append(knowledge_slice)
            knowledge_url = event_chunk[&#39;meta&#39;][&#39;link&#39;][&#39;url&#39;].replace(&#39;u0026&#39;, &#39;&amp;&#39;)
            result.append(knowledge_url)
            
return result
</code></pre><p>这个函数的输入是响应流event_data，输出的result为由召回片段和召回片段所在的知识库页面link组成的list。</p><p>由此，对于流式输出，我们的改写如下：</p><p>knowledge_results = []</p><p>for line in response.iter_lines():<br> decoded_line = line.decode(&#39;utf-8&#39;,errors=&#39;ignore&#39;) #解码<br> #print(decoded_line)<br> if decoded_line.startswith(&quot;event:&quot;): #标记event<br> event = decoded_line[6:]<br> #print(event)<br> if decoded_line.startswith(&quot;data:&quot;):<br> event_data = json.loads(decoded_line[5:])<br> #print(event_data)<br> if event == &#39;conversation.message.delta&#39;: #流式输出标记<br> sys.stdout.write(event_data[&quot;content&quot;])<br> time.sleep(0.1)<br> if event == &#39;conversation.message.completed&#39;: #知识库、最终完整输出标记<br> knowledge_results = knowledge_results + get_coze_rag(event_data)</p><p>print(f&quot;\n\n知识库召回片段：{knowledge_results}&quot;)<br> 对于非流式输出，我们的改写如下：</p><p>response = response.json()<br> #print(response)</p><p>conversation_id = response[&#39;data&#39;].get(&#39;conversation_id&#39;)<br> chat_id = response[&#39;data&#39;].get(&#39;id&#39;)<br> print(f&#39;Chat_ID:{conversation_id};\nConversation_ID:{conversation_id}&#39;)</p><p>retrieve_url = f&#39;<a href="https://api.coze.cn/v3/chat/retrieve?conversation_id=%7Bconversation_id%7D&amp;chat_id=%7Bchat_id%7D" target="_blank" rel="noopener noreferrer">https://api.coze.cn/v3/chat/retrieve?conversation_id={conversation_id}&amp;chat_id={chat_id}</a>&#39;<br> while requests.get(retrieve_url, headers=headers).json()[&#39;data&#39;][&#39;status&#39;] != &quot;completed&quot;:<br> time.sleep(0.5)<br> print(&quot;coze bot wait ......&quot;)</p><p>message_url = f&#39;<a href="https://api.coze.cn/v3/chat/message/list?chat_id=%7Bchat_id%7D&amp;conversation_id=%7Bconversation_id%7D" target="_blank" rel="noopener noreferrer">https://api.coze.cn/v3/chat/message/list?chat_id={chat_id}&amp;conversation_id={conversation_id}</a>&#39;<br> message_response = requests.get(message_url, headers=headers).json()</p><p>event_data_knowledge = message_response[&#39;data&#39;][0]<br> knowledge_results = get_coze_rag(event_data_knowledge)</p><p>event_data_answer = message_response[&#39;data&#39;][1]<br> output = event_data_answer[&quot;content&quot;]</p><p>print(output)<br> print(f&quot;\n知识库召回片段：{knowledge_results}&quot;)<br> 上面所有代码均实测可用无报错，但也均预留了print调试接口，以供遇到bug时调试。当然，报错时求助大模型也是一个好主意（推荐DeepSeek）。</p><p>编辑于 2024-10-15 20:51・IP 属地上海<br> Python<br> API<br> coze专业版<br> ​赞同 1​<br> ​2 条评论<br> ​分享<br> ​喜欢<br> ​收藏<br> ​申请转载<br> ​</p><p>赞同 1</p><p>​<br> 分享</p><p>理性发言，友善互动</p><p>2 条评论<br> 默认<br> 最新<br> 白笑猫<br> 白笑猫<br> 可以出个工作流API调用吗谢谢[爱]</p><p>02-21 · 广东<br> ​回复<br> ​1<br> DefinitelyFly<br> DefinitelyFly<br> 作者<br> 我找了一下 COZE好像不支持直接调用工作流哈 必须包装为智能体或者应用后才能发布API</p><p>03-10 · 上海<br> ​回复<br> ​喜欢<br> 推荐阅读<br> 基于coze创建自己的私人知识库<br> corz是字节跳动发布的“一站式AI开发平台“，看官方介绍为： Coze is a next-generation AI Bot development platform. Regardless of your programming experience, Coze enables you to e…</p><p>Ryan<br> 人人都学得会用coze工作流搭建|保姆级工作流教程<br> 之前我们写了一篇详细介绍如何通过coze搭建bot（机器人）的详细教程。 100%免费用GPT4 Turbo！Coze（扣子）平台保姆级创建bot（智能体）教程这篇阅读量还不错，今天我们来介绍一下比较难的 …</p><p>小吴科技屋<br> 千亿参数，百万序列 | XTuner 超长上下文训练方案<br> 千亿参数，百万序列 | XTuner 超长上下文训练方案<br> OpenMMLab<br> coze教程 | 04 工作流之大模型节点<br> 1 大模型节点概述首先看一下大模型节点的配置： 配置可以看到5个部分： 1.1 模型这次介绍的是coze国内版，如果是海外版的话模型的选择是不一样的。根据自己的需求特别要注意一下模型的token…</p><p>荣姐聊AI<br> 发表于AI智能体</p><p>选择语言</p></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/4/1 15:14:53</span></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: z66666z@163.com">Because66666</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/docs/coze_hiagent/HiagentAPI.html" aria-label="Coze 智能体后端 API 文档" iconsizing="both"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->Coze 智能体后端 API 文档</div></a><a class="route-link auto-link next" href="/docs/coze_hiagent/mysql_api.html" aria-label="MySQL API 接口文档" iconsizing="both"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">MySQL API 接口文档<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">默认页脚</div><div class="vp-copyright">Copyright © 2025 aokimi </div></footer></div><!--]--><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CBln_ck3.js" defer></script>
  </body>
</html>
