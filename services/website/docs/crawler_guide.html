<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.74" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://vuepress-theme-hope-docs-demo.netlify.app/docs/crawler_guide.html"><meta property="og:site_name" content="å—å¼€WIKI"><meta property="og:title" content="Crawler æ¨¡å—ä½¿ç”¨æŒ‡å—"><meta property="og:description" content="Crawler æ¨¡å—ä½¿ç”¨æŒ‡å— ç®€ä»‹ etl/crawler æ¨¡å—æ˜¯ nkuwiki æ ¡å›­çŸ¥è¯†å…±äº«å¹³å°çš„æ•°æ®æå–æ ¸å¿ƒï¼Œè´Ÿè´£ä»å„ç§æŒ‡å®šçš„æ•°æ®æºï¼ˆå¦‚å¾®ä¿¡å…¬ä¼—å·ã€é›†å¸‚ã€æ–°æµªè´¢ç»ç­‰ï¼‰æŠ“å–ä¿¡æ¯ã€‚è¯¥æ¨¡å—åŸºäº Playwright å®ç°ï¼Œæ”¯æŒæµè§ˆå™¨è‡ªåŠ¨åŒ–ã€ä»£ç†é…ç½®ã€ååçˆ¬è™«ç­–ç•¥ç­‰åŠŸèƒ½ã€‚ æ¨¡å—ç»“æ„ ç¯å¢ƒé…ç½® Python ç¯å¢ƒ: ç¡®ä¿å·²å®‰è£…é¡¹ç›®æ‰€éœ€çš„ Python ç‰ˆæœ¬..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Crawler æ¨¡å—ä½¿ç”¨æŒ‡å—","image":[""],"dateModified":null,"author":[{"@type":"Person","name":"NKU-WIKI","url":"https://github.com/NKU-WIKI/nkuwiki"}]}</script><title>Crawler æ¨¡å—ä½¿ç”¨æŒ‡å— | å—å¼€WIKI</title><meta name="description" content="Crawler æ¨¡å—ä½¿ç”¨æŒ‡å— ç®€ä»‹ etl/crawler æ¨¡å—æ˜¯ nkuwiki æ ¡å›­çŸ¥è¯†å…±äº«å¹³å°çš„æ•°æ®æå–æ ¸å¿ƒï¼Œè´Ÿè´£ä»å„ç§æŒ‡å®šçš„æ•°æ®æºï¼ˆå¦‚å¾®ä¿¡å…¬ä¼—å·ã€é›†å¸‚ã€æ–°æµªè´¢ç»ç­‰ï¼‰æŠ“å–ä¿¡æ¯ã€‚è¯¥æ¨¡å—åŸºäº Playwright å®ç°ï¼Œæ”¯æŒæµè§ˆå™¨è‡ªåŠ¨åŒ–ã€ä»£ç†é…ç½®ã€ååçˆ¬è™«ç­–ç•¥ç­‰åŠŸèƒ½ã€‚ æ¨¡å—ç»“æ„ ç¯å¢ƒé…ç½® Python ç¯å¢ƒ: ç¡®ä¿å·²å®‰è£…é¡¹ç›®æ‰€éœ€çš„ Python ç‰ˆæœ¬...">
    <link rel="preload" href="/assets/style-fHUuFwQE.css" as="style"><link rel="stylesheet" href="/assets/style-fHUuFwQE.css">
    <link rel="modulepreload" href="/assets/app-DWPKiBdg.js"><link rel="modulepreload" href="/assets/crawler_guide.html-DicbZ-bF.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-Cr3GF_mD.js" as="script"><link rel="prefetch" href="/assets/index.html-CcXAoehT.js" as="script"><link rel="prefetch" href="/assets/data_source.html-DwR75SZz.js" as="script"><link rel="prefetch" href="/assets/introduction.html-C03Ru1e7.js" as="script"><link rel="prefetch" href="/assets/life.html-BiV10VM5.js" as="script"><link rel="prefetch" href="/assets/links.html-CpeF9U_i.js" as="script"><link rel="prefetch" href="/assets/map.html-DIa1SBZZ.js" as="script"><link rel="prefetch" href="/assets/nkuwiki_build.html-DZ8UHhA2.js" as="script"><link rel="prefetch" href="/assets/index.html-BIq40Ue7.js" as="script"><link rel="prefetch" href="/assets/used_files.html-BZhnsbYb.js" as="script"><link rel="prefetch" href="/assets/word.html-B5AwwSaC.js" as="script"><link rel="prefetch" href="/assets/api_docs.html-B9NiIoUx.js" as="script"><link rel="prefetch" href="/assets/configuration_guide.html-7h8BQKz7.js" as="script"><link rel="prefetch" href="/assets/database_guide.html-DmBaZyKx.js" as="script"><link rel="prefetch" href="/assets/deployment_guide.html-CIn6jZk2.js" as="script"><link rel="prefetch" href="/assets/docker_guide.html-BbFcUcG6.js" as="script"><link rel="prefetch" href="/assets/installation_guide.html-M50XTVWX.js" as="script"><link rel="prefetch" href="/assets/nkuwiki_dev.html-yUkFnkCs.js" as="script"><link rel="prefetch" href="/assets/qa_service_guide.html-DOUlY92T.js" as="script"><link rel="prefetch" href="/assets/rag.html-CRa_yQUf.js" as="script"><link rel="prefetch" href="/assets/index.html-DOH90Ckl.js" as="script"><link rel="prefetch" href="/assets/redis_guide.html-EGS2CKo7.js" as="script"><link rel="prefetch" href="/assets/404.html-NrdujWzz.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-DXWKOczD.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-QXEOFQJV-B_pSRW3C.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo" src="/favicon.ico" alt><!----><span class="vp-site-name hide-in-pad">å—å¼€WIKI</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="ä¸»é¡µ" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:house" height="1em" sizing="height"></iconify-icon><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/docx/" aria-label="ç›®å½•" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:laptop-code" height="1em" sizing="height"></iconify-icon><!--]-->ç›®å½•<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/docs/" aria-label="å¼€å‘æ–‡æ¡£" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:book" height="1em" sizing="height"></iconify-icon><!--]-->å¼€å‘æ–‡æ¡£<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/communicate/" aria-label="è”ç³»" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="majesticons:file" height="1em" sizing="height"></iconify-icon><!--]-->è”ç³»<!----></a></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/NKU-WIKI/nkuwiki" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="ä¸»é¡µ" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:house" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->ä¸»é¡µ<!----></a></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header clickable"><iconify-icon class="vp-icon" icon="fa6-solid:laptop-code" width="1em" height="1em" sizing="both"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/docx/" aria-label="ç›®å½•" iconsizing="both"><!---->ç›®å½•<!----></a><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/docx/word.html" aria-label="å¸¸ç”¨æ–‡æ¡£" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:book-plus" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->å¸¸ç”¨æ–‡æ¡£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docx/introduction.html" aria-label="ç®€ä»‹" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:book-plus" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->ç®€ä»‹<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docx/data_source.html" aria-label="æ•°æ®æºé‡ç‚¹å®ä½“æ¸…å•" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:book-plus" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->æ•°æ®æºé‡ç‚¹å®ä½“æ¸…å•<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docx/life.html" aria-label="å—å¼€æ–°ç”ŸæŒ‡å—" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:book-plus" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->å—å¼€æ–°ç”ŸæŒ‡å—<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docx/links.html" aria-label="å¸¸ç”¨é“¾æ¥" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:book-plus" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->å¸¸ç”¨é“¾æ¥<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docx/used_files.html" aria-label="å—å¼€å¸¸ç”¨æ–‡ä»¶" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:file" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->å—å¼€å¸¸ç”¨æ–‡ä»¶<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docx/map.html" aria-label="åœ°å›¾" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:book-plus" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->åœ°å›¾<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docx/nkuwiki_build.html" aria-label="nku-wikiå»ºè®¾" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:book-plus" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->nku-wikiå»ºè®¾<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header clickable active"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><a class="route-link route-link-active auto-link vp-sidebar-title no-external-link-icon" href="/docs/" aria-label="å¼€å‘æ–‡æ¡£" iconsizing="both"><!---->å¼€å‘æ–‡æ¡£<!----></a><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/docs/" aria-label="nkuwiki é¡¹ç›®æ–‡æ¡£" iconsizing="both"><!---->nkuwiki é¡¹ç›®æ–‡æ¡£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/nkuwiki_dev.html" aria-label="ğŸ“šnkuwikiå¼€å‘æ–‡æ¡£" iconsizing="both"><!---->ğŸ“šnkuwikiå¼€å‘æ–‡æ¡£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/api_docs.html" aria-label="å—å¼€Wiki APIæ–‡æ¡£" iconsizing="both"><!---->å—å¼€Wiki APIæ–‡æ¡£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/database_guide.html" aria-label="æ•°æ®åº“æŒ‡å—" iconsizing="both"><!---->æ•°æ®åº“æŒ‡å—<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/docs/crawler_guide.html" aria-label="Crawler æ¨¡å—ä½¿ç”¨æŒ‡å—" iconsizing="both"><!---->Crawler æ¨¡å—ä½¿ç”¨æŒ‡å—<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/docker_guide.html" aria-label="Docker ä½¿ç”¨æŒ‡å—" iconsizing="both"><!---->Docker ä½¿ç”¨æŒ‡å—<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/installation_guide.html" aria-label="nkuwiki å®‰è£…æŒ‡å—" iconsizing="both"><!---->nkuwiki å®‰è£…æŒ‡å—<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/deployment_guide.html" aria-label="nkuwiki éƒ¨ç½²æŒ‡å—" iconsizing="both"><!---->nkuwiki éƒ¨ç½²æŒ‡å—<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/configuration_guide.html" aria-label="nkuwiki é…ç½®æŒ‡å—" iconsizing="both"><!---->nkuwiki é…ç½®æŒ‡å—<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/qa_service_guide.html" aria-label="nkuwiki é—®ç­”æœåŠ¡ä½¿ç”¨æŒ‡å—" iconsizing="both"><!---->nkuwiki é—®ç­”æœåŠ¡ä½¿ç”¨æŒ‡å—<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/rag.html" aria-label="ragæ–¹æ¡ˆ" iconsizing="both"><!---->ragæ–¹æ¡ˆ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docs/redis_guide.html" aria-label="Redisé…ç½®ä¸ä½¿ç”¨æŒ‡å—" iconsizing="both"><!---->Redisé…ç½®ä¸ä½¿ç”¨æŒ‡å—<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">è”ç³»æˆ‘ä»¬</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/communicate/" aria-label="è”ç³»" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="majesticons:file" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->è”ç³»<!----></a></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Crawler æ¨¡å—ä½¿ç”¨æŒ‡å—</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/NKU-WIKI/nkuwiki" target="_blank" rel="noopener noreferrer">NKU-WIKI</a></span><span property="author" content="NKU-WIKI"></span></span><!----><!----><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 8 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT8M"></span><!----><!----></div><hr></div><!----><!----><div class="theme-hope-content" vp-content><h1 id="crawler-æ¨¡å—ä½¿ç”¨æŒ‡å—" tabindex="-1"><a class="header-anchor" href="#crawler-æ¨¡å—ä½¿ç”¨æŒ‡å—"><span>Crawler æ¨¡å—ä½¿ç”¨æŒ‡å—</span></a></h1><h2 id="ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#ç®€ä»‹"><span>ç®€ä»‹</span></a></h2><p><code>etl/crawler</code> æ¨¡å—æ˜¯ nkuwiki æ ¡å›­çŸ¥è¯†å…±äº«å¹³å°çš„æ•°æ®æå–æ ¸å¿ƒï¼Œè´Ÿè´£ä»å„ç§æŒ‡å®šçš„æ•°æ®æºï¼ˆå¦‚å¾®ä¿¡å…¬ä¼—å·ã€é›†å¸‚ã€æ–°æµªè´¢ç»ç­‰ï¼‰æŠ“å–ä¿¡æ¯ã€‚è¯¥æ¨¡å—åŸºäº Playwright å®ç°ï¼Œæ”¯æŒæµè§ˆå™¨è‡ªåŠ¨åŒ–ã€ä»£ç†é…ç½®ã€ååçˆ¬è™«ç­–ç•¥ç­‰åŠŸèƒ½ã€‚</p><h2 id="æ¨¡å—ç»“æ„" tabindex="-1"><a class="header-anchor" href="#æ¨¡å—ç»“æ„"><span>æ¨¡å—ç»“æ„</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>etl/crawler/</span></span>
<span class="line"><span>â”œâ”€â”€ __init__.py             # æ¨¡å—åˆå§‹åŒ–ï¼Œé…ç½®åŠ è½½</span></span>
<span class="line"><span>â”œâ”€â”€ base_crawler.py         # çˆ¬è™«åŸºç±»ï¼Œå°è£…é€šç”¨é€»è¾‘</span></span>
<span class="line"><span>â”œâ”€â”€ webpage_spider/         # é€šç”¨ç½‘é¡µçˆ¬è™«å·¥å…·</span></span>
<span class="line"><span>â”œâ”€â”€ xhs_spider/             # å°çº¢ä¹¦çˆ¬è™«</span></span>
<span class="line"><span>â”œâ”€â”€ douyin_spider/          # æŠ–éŸ³çˆ¬è™«</span></span>
<span class="line"><span>â”œâ”€â”€ wechat.py               # å¾®ä¿¡å…¬ä¼—å·çˆ¬è™«</span></span>
<span class="line"><span>â”œâ”€â”€ market.py               # æ ¡å›­é›†å¸‚çˆ¬è™«</span></span>
<span class="line"><span>â”œâ”€â”€ sina_finance.py         # æ–°æµªè´¢ç»çˆ¬è™«</span></span>
<span class="line"><span>â”œâ”€â”€ module_example.py       # çˆ¬è™«å¼€å‘ç¤ºä¾‹</span></span>
<span class="line"><span>â”œâ”€â”€ init_script.js          # Playwright æµè§ˆå™¨åˆå§‹åŒ–è„šæœ¬ï¼Œç”¨äºåæ£€æµ‹</span></span>
<span class="line"><span>â””â”€â”€ README.md               # æ¨¡å—å†…éƒ¨çš„å¼€å‘æŒ‡å—</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç¯å¢ƒé…ç½®" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒé…ç½®"><span>ç¯å¢ƒé…ç½®</span></a></h2><ol><li><strong>Python ç¯å¢ƒ</strong>: ç¡®ä¿å·²å®‰è£…é¡¹ç›®æ‰€éœ€çš„ Python ç‰ˆæœ¬åŠç›¸å…³ä¾èµ–ï¼ˆå‚è€ƒé¡¹ç›®æ ¹ç›®å½•çš„ <code>requirements.txt</code>ï¼‰ã€‚</li><li><strong>Playwright</strong>: é¦–æ¬¡è¿è¡Œæˆ–åœ¨æ–°çš„ç¯å¢ƒä¸­ï¼Œå¯èƒ½éœ€è¦å®‰è£… Playwright åŠå…¶æµè§ˆå™¨é©±åŠ¨ï¼š<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">playwright</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æˆ–è€…ä»…å®‰è£… chromium</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">playwright</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> chromium</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><strong>é…ç½®æ–‡ä»¶</strong>: çˆ¬è™«æ¨¡å—çš„ç‰¹å®šé…ç½®é¡¹ä½äºé¡¹ç›®æ ¹ç›®å½•çš„ <code>config.json</code> æ–‡ä»¶ä¸­ï¼Œä¸»è¦é›†ä¸­åœ¨ <code>etl.crawler</code> é”®ä¸‹ã€‚å…³é”®é…ç½®åŒ…æ‹¬ï¼š <ul><li><code>proxy_pool</code>: ä»£ç†æœåŠ¡å™¨åœ°å€ï¼Œä¾‹å¦‚ <code>&quot;http://127.0.0.1:7897&quot;</code>ã€‚å¦‚æœä¸éœ€è¦ä»£ç†ï¼Œå¯ä»¥ç•™ç©ºæˆ–ç¡®ä¿ <code>use_proxy</code> å‚æ•°ä¸º <code>false</code>ã€‚</li><li><code>market_token</code>: è®¿é—®æ ¡å›­é›†å¸‚ API å¯èƒ½éœ€è¦çš„ tokenã€‚</li><li><code>accounts</code>: å„ç±»å¹³å°è´¦å·é…ç½®ï¼Œä¾‹å¦‚å¾®ä¿¡å…¬ä¼—å·åˆ—è¡¨ (<code>unofficial_accounts</code>, <code>university_official_accounts</code> ç­‰)ã€‚</li></ul></li></ol><h2 id="æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#æ ¸å¿ƒæ¦‚å¿µ"><span>æ ¸å¿ƒæ¦‚å¿µ</span></a></h2><h3 id="basecrawler-åŸºç±»" tabindex="-1"><a class="header-anchor" href="#basecrawler-åŸºç±»"><span><code>BaseCrawler</code> åŸºç±»</span></a></h3><p>æ‰€æœ‰å…·ä½“çš„çˆ¬è™«éƒ½ç»§æ‰¿è‡ª <code>etl.crawler.base_crawler.BaseCrawler</code>ã€‚è¯¥åŸºç±»æä¾›äº†ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š</p><ul><li><strong>å¼‚æ­¥æµè§ˆå™¨æ“ä½œ</strong>: ä½¿ç”¨ <code>playwright</code> åº“è¿›è¡Œå¼‚æ­¥çš„æµè§ˆå™¨æ§åˆ¶ã€‚</li><li><strong>è¯·æ±‚å¤´ä¸ User-Agent</strong>: éšæœºé€‰æ‹© User-Agentï¼Œæ¨¡æ‹Ÿä¸åŒæµè§ˆå™¨ã€‚</li><li><strong>ä»£ç†ç®¡ç†</strong>: æ”¯æŒä»é…ç½®ä¸­åŠ è½½ä»£ç†æ± ï¼Œå¹¶è¿›è¡Œè½®æ¢ã€‚</li><li><strong>Cookies ç®¡ç†</strong>: è‡ªåŠ¨è¯»å–ã€ä¿å­˜å’Œåˆå§‹åŒ– Cookiesï¼Œæ”¯æŒè®¾ç½® Cookies æœ‰æ•ˆæœŸã€‚</li><li><strong>åæ£€æµ‹</strong>: æ³¨å…¥ <code>init_script.js</code> ä»¥å°è¯•è§„é¿ç½‘ç«™å¯¹è‡ªåŠ¨åŒ–å·¥å…·çš„æ£€æµ‹ã€‚</li><li><strong>æ•°æ®å­˜å‚¨</strong>: çˆ¬å–çš„æ•°æ®é»˜è®¤ä¿å­˜åœ¨ <code>data/raw/&lt;platform&gt;/&lt;tag&gt;/</code> ç›®å½•ä¸‹ã€‚</li><li><strong>æ—¥å¿—è®°å½•</strong>: ä½¿ç”¨ <code>crawler_logger</code>è®°å½•çˆ¬è™«è¿è¡Œè¿‡ç¨‹ä¸­çš„ä¿¡æ¯ã€‚</li><li><strong>çŠ¶æ€ç®¡ç†</strong>: é€šè¿‡é”æ–‡ä»¶ (<code>lock.txt</code>) é˜²æ­¢é‡å¤è¿è¡Œï¼Œé€šè¿‡è®¡æ•°å™¨æ–‡ä»¶ (<code>counter.txt</code>) è®°å½•ç»Ÿè®¡ä¿¡æ¯ã€‚</li></ul><h3 id="çˆ¬è™«å®ä¾‹åˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#çˆ¬è™«å®ä¾‹åˆå§‹åŒ–"><span>çˆ¬è™«å®ä¾‹åˆå§‹åŒ–</span></a></h3><p>åˆå§‹åŒ–ä¸€ä¸ªçˆ¬è™«å®ä¾‹æ—¶ï¼Œé€šå¸¸éœ€è¦æä¾›ä»¥ä¸‹å‚æ•°ï¼š</p><ul><li><code>debug</code> (bool): æ˜¯å¦å¼€å¯è°ƒè¯•æ¨¡å¼ã€‚è°ƒè¯•æ¨¡å¼ä¸‹é€šå¸¸æ—¥å¿—æ›´è¯¦ç»†ï¼Œåçˆ¬æªæ–½è¾ƒå°‘ã€‚é»˜è®¤ä¸º <code>False</code>ã€‚</li><li><code>headless</code> (bool): æ˜¯å¦ä»¥æ— å¤´æ¨¡å¼è¿è¡Œæµè§ˆå™¨ã€‚æ— å¤´æ¨¡å¼ä¸æ˜¾ç¤ºæµè§ˆå™¨ç•Œé¢ï¼Œé€‚åˆæœåŠ¡å™¨è¿è¡Œã€‚é»˜è®¤ä¸º <code>False</code>ã€‚</li><li><code>use_proxy</code> (bool): æ˜¯å¦ä½¿ç”¨ä»£ç†ã€‚é»˜è®¤ä¸º <code>False</code>ã€‚</li><li><code>tag</code> (str): çˆ¬è™«ä»»åŠ¡çš„æ ‡ç­¾ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„çˆ¬å–æ‰¹æ¬¡æˆ–ç›®æ ‡ï¼Œä¼šå½±å“æ•°æ®å­˜å‚¨è·¯å¾„ã€‚</li></ul><p>ç‰¹å®šçˆ¬è™«å¯èƒ½è¿˜éœ€è¦é¢å¤–çš„å‚æ•°ï¼Œä¾‹å¦‚ <code>wechat.py</code> ä¸­çš„ <code>authors</code>ï¼ˆæŒ‡å®šè¦çˆ¬å–çš„å…¬ä¼—å·åˆ—è¡¨ï¼‰ã€‚</p><h2 id="å¦‚ä½•è¿è¡Œçˆ¬è™«" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•è¿è¡Œçˆ¬è™«"><span>å¦‚ä½•è¿è¡Œçˆ¬è™«</span></a></h2><p>å¤§å¤šæ•°çˆ¬è™«è„šæœ¬å¯ä»¥ç›´æ¥ä½œä¸º Python æ–‡ä»¶è¿è¡Œï¼Œæˆ–è€…é€šè¿‡æ¨¡å—åŒ–æ–¹å¼æ‰§è¡Œã€‚</p><p><strong>ç¤ºä¾‹ï¼šè¿è¡Œå¾®ä¿¡å…¬ä¼—å·çˆ¬è™«</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å‡è®¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æ–¹æ³•ä¸€ï¼šç›´æ¥è¿è¡Œè„šæœ¬ï¼ˆå¦‚æœè„šæœ¬å†…æœ‰ main æ‰§è¡Œé€»è¾‘ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># python etl/crawler/wechat.py</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æ–¹æ³•äºŒï¼šé€šè¿‡æ¨¡å—åŒ–æ–¹å¼è¿è¡Œï¼ˆæ›´æ¨èï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># python -m etl.crawler.wechat</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>é€šç”¨çˆ¬è™«æ‰§è¡Œæµç¨‹</strong></p><ol><li><p><strong>åˆå§‹åŒ–çˆ¬è™«å¯¹è±¡</strong>:</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> etl.crawler.wechat </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Wechat </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># ä»¥å¾®ä¿¡çˆ¬è™«ä¸ºä¾‹</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å®ä¾‹åŒ–çˆ¬è™«</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Club Official Accounts</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">wechat_crawler </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> Wechat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">    authors</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;club_official_accounts&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å¯¹åº” config.json ä¸­çš„è´¦å·é…ç½®é”®å</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">    debug</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">False</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">    headless</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># ç”Ÿäº§ç¯å¢ƒå»ºè®® True</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">    use_proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # æ ¹æ®éœ€è¦é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>æ‰§è¡Œçˆ¬å–å…ƒæ•°æ®</strong>:<br> è°ƒç”¨çˆ¬è™«å¯¹è±¡çš„ <code>scrape()</code> æ–¹æ³•æ¥æŠ“å–ç›®æ ‡å†…å®¹çš„å…ƒä¿¡æ¯ï¼ˆå¦‚æ–‡ç« åˆ—è¡¨ã€æ ‡é¢˜ã€é“¾æ¥ç­‰ï¼‰ã€‚</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å¼‚æ­¥æ‰§è¡Œ scrape æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> asyncio</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">asyncio.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(wechat_crawler.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">scrape</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">max_article_num</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">total_max_article_num</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># max_article_num: å•ä¸ªå…¬ä¼—å·æœ¬æ¬¡æœ€å¤šçˆ¬å–çš„æ–‡ç« æ•°</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># total_max_article_num: æœ¬æ¬¡ä»»åŠ¡æ€»å…±æœ€å¤šçˆ¬å–çš„æ–‡ç« æ•°</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>æ‰§è¡Œä¸‹è½½å†…å®¹</strong>:<br> è°ƒç”¨çˆ¬è™«å¯¹è±¡çš„ <code>download()</code> æ–¹æ³•æ¥ä¸‹è½½å…ƒä¿¡æ¯ä¸­é“¾æ¥å¯¹åº”çš„å…·ä½“å†…å®¹ï¼ˆå¦‚æ–‡ç« è¯¦æƒ…ï¼‰ã€‚</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å¼‚æ­¥æ‰§è¡Œ download æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">asyncio.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(wechat_crawler.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">download</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">debug</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">False</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">headless</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">use_proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼š<code>download</code> æ–¹æ³•é€šå¸¸ä¹Ÿéœ€è¦ <code>debug</code>, <code>headless</code>, <code>use_proxy</code> ç­‰å‚æ•°ï¼Œå…¶è¡Œä¸ºä¸åˆå§‹åŒ–æ—¶ç±»ä¼¼ï¼Œä½†å¯ä»¥ç‹¬ç«‹è®¾ç½®ã€‚</p></li><li><p><strong>å…³é—­çˆ¬è™«</strong>:<br> æ˜¾å¼è°ƒç”¨ <code>close()</code> æ–¹æ³•é‡Šæ”¾èµ„æºï¼Œç‰¹åˆ«æ˜¯æµè§ˆå™¨å’Œ Playwright å®ä¾‹ã€‚</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">asyncio.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(wechat_crawler.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">())</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol><h2 id="å¼€å‘æ–°çˆ¬è™«" tabindex="-1"><a class="header-anchor" href="#å¼€å‘æ–°çˆ¬è™«"><span>å¼€å‘æ–°çˆ¬è™«</span></a></h2><p>å‚è€ƒ <code>etl/crawler/README.md</code> ä¸­çš„ &quot;å¼€å‘æ–°çˆ¬è™«&quot; éƒ¨åˆ†ï¼Œä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p><strong>ç»§æ‰¿ <code>BaseCrawler</code></strong>:</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> etl.crawler </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> crawler_logger, config </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å¯¼å…¥æ‰€éœ€é…ç½®å’Œæ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> etl.crawler.base_crawler </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> BaseCrawler</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyNewCrawler</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BaseCrawler</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    def</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> __init__</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E5C07B;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> platform_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;my_platform&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> tag</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;default_tag&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> **</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;">kwargs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.platform </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> platform_name</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.tag </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tag </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># éå¸¸é‡è¦ï¼Œç”¨äºåŒºåˆ†æ•°æ®å­˜å‚¨</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">        super</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">__init__</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(**kwargs)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.logger </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> crawler_logger.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">bind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">platform</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.platform, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">tag</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.tag)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # self.base_url = &quot;...&quot; # å®šä¹‰åŸºç¡€ URL</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # self.content_type = &quot;article&quot; # å®šä¹‰å†…å®¹ç±»å‹</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    async</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> scrape</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E5C07B;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> **</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;">kwargs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;&quot;&quot;çˆ¬å–å…ƒæ•°æ®&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.logger.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å¼€å§‹çˆ¬å–å…ƒæ•°æ®...&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        await</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">async_init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># åˆå§‹åŒ– Playwright å’Œæµè§ˆå™¨</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # ... å®ç°å…·ä½“çš„çˆ¬å–é€»è¾‘ ...</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # ä¾‹å¦‚ï¼šå¯¼èˆªåˆ°ç›®æ ‡é¡µé¢ï¼Œè§£æå…ƒç´ ï¼Œæå–é“¾æ¥å’Œæ ‡é¢˜</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # ä½¿ç”¨ self.page è¿›è¡Œæµè§ˆå™¨æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # await self.page.goto(self.base_url)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # ...</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # å­˜å‚¨å…ƒæ•°æ®ï¼Œä¾‹å¦‚å†™å…¥ JSON æ–‡ä»¶æˆ–æ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.logger.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å…ƒæ•°æ®çˆ¬å–å®Œæˆã€‚&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    async</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> download_item</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E5C07B;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> original_url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> title</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> **</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;">kwargs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;&quot;&quot;ä¸‹è½½å•ä¸ªé¡¹ç›®çš„å…·ä½“å†…å®¹&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.logger.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">debug</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å‡†å¤‡ä¸‹è½½: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">title</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">original_url</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # ... å®ç°ä¸‹è½½é€»è¾‘ ...</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # é€šå¸¸ä¹Ÿéœ€è¦ await self.async_init() å¦‚æœ scrape åå…³é—­äº†æµè§ˆå™¨</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # æˆ–è€…ç¡®ä¿æµè§ˆå™¨ä¼šè¯æŒç»­</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # await self.page.goto(original_url)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # content = await self.page.content()</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # ... ä¿å­˜å†…å®¹ ...</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # self.save_data(data, filename_prefix=title)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    async</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> download</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E5C07B;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> **</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;">kwargs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;&quot;&quot;æ ¹æ®å·²çˆ¬å–çš„å…ƒæ•°æ®ä¸‹è½½å®Œæ•´å†…å®¹&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.logger.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å¼€å§‹ä¸‹è½½å†…å®¹...&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # è¯»å–ä¹‹å‰ scrape ä¿å­˜çš„å…ƒæ•°æ®åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # for item_metadata in metadata_list:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        #     await self.download_item(item_metadata[&#39;original_url&#39;], item_metadata[&#39;title&#39;])</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.logger.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å†…å®¹ä¸‹è½½å®Œæˆã€‚&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    async</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> login_for_cookies</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E5C07B;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;&quot;&quot;å¦‚æœå¹³å°éœ€è¦ç™»å½•ï¼Œå®ç°æ­¤æ–¹æ³•ä»¥è·å–å’Œä¿å­˜ Cookies&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.logger.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å¼€å§‹ç™»å½•æµç¨‹...&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        await</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">async_init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # ... å®ç°ç™»å½•é€»è¾‘ ...</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # ä¾‹å¦‚ï¼šå¯¼èˆªåˆ°ç™»å½•é¡µï¼Œå¡«å……è¡¨å•ï¼Œç‚¹å‡»ç™»å½•æŒ‰é’®</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # æˆåŠŸç™»å½•åï¼Œä» self.context.cookies() è·å– cookies</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # cookies = await self.context.cookies()</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # self.save_cookies(cookies) # ä½¿ç”¨åŸºç±»æ–¹æ³•ä¿å­˜</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.logger.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ç™»å½•å®Œæˆå¹¶å·²ä¿å­˜ Cookiesã€‚&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>å®ç°å¿…è¦æ–¹æ³•</strong>:</p><ul><li><code>__init__(self, **kwargs)</code>: åˆå§‹åŒ–çˆ¬è™«é…ç½®ï¼Œ<strong>åŠ¡å¿…è®¾ç½® <code>self.platform</code> å’Œ <code>self.tag</code></strong>ï¼Œå¹¶è°ƒç”¨ <code>super().__init__(**kwargs)</code>ã€‚</li><li><code>scrape(self, **kwargs)</code>: ä¸»çˆ¬å–æ–¹æ³•ï¼Œè´Ÿè´£æŠ“å–å…ƒæ•°æ®ã€‚</li><li><code>download(self, **kwargs)</code>: æ ¹æ®å…ƒæ•°æ®ä¸‹è½½å®Œæ•´å†…å®¹ã€‚å¯ä»¥è¿›ä¸€æ­¥ç»†åˆ†ä¸º <code>download_item</code> ç­‰æ–¹æ³•ã€‚</li><li><code>login_for_cookies(self)</code>: å¦‚æœéœ€è¦ç™»å½•æ‰èƒ½è®¿é—®æ•°æ®ï¼Œåˆ™å¿…é¡»å®ç°æ­¤æ–¹æ³•ã€‚</li></ul></li><li><p><strong>æ•°æ®ä¿å­˜</strong>:<br> çˆ¬å–çš„åŸå§‹æ•°æ®åº”ä¿å­˜åœ¨ <code>data/raw/&lt;platform&gt;/&lt;tag&gt;/</code> ç›®å½•ä¸‹ã€‚æ¨èä½¿ç”¨ JSON æ ¼å¼ï¼Œå¹¶éµå¾ªæ¨¡å— <code>README.md</code> ä¸­å»ºè®®çš„å­—æ®µè§„èŒƒã€‚åŸºç±»æä¾›äº† <code>self.safe_write_file(path, content)</code> æ–¹æ³•ç”¨äºå®‰å…¨å†™å…¥æ–‡ä»¶ã€‚</p></li></ol><h2 id="æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹"><span>æ³¨æ„äº‹é¡¹</span></a></h2><ul><li><strong>é€Ÿç‡é™åˆ¶ä¸åçˆ¬</strong>: <ul><li>ç”Ÿäº§ç¯å¢ƒ (å¤§è§„æ¨¡çˆ¬å–) è¯·è®¾ç½® <code>debug=False</code> å’Œ <code>headless=True</code>ã€‚</li><li>è°ƒè¯•æ¨¡å¼ (<code>debug=True</code>) é€šå¸¸ä¼šè·³è¿‡ä¸€äº›éšæœºå»¶æ—¶å’Œå¤æ‚çš„æ¨¡æ‹Ÿç”¨æˆ·è¡Œä¸ºï¼Œæ›´å®¹æ˜“è§¦å‘åçˆ¬æœºåˆ¶ã€‚</li><li>åˆç†ä½¿ç”¨ <code>await self.random_sleep()</code>ï¼ˆåŸºç±»æ–¹æ³•ï¼Œä½†éœ€åœ¨å¼‚æ­¥æ–¹æ³•ä¸­ <code>await</code>ï¼‰æˆ– <code>asyncio.sleep()</code> æ¥æ§åˆ¶è¯·æ±‚é¢‘ç‡ã€‚</li><li>è€ƒè™‘ä½¿ç”¨ä»£ç† (<code>use_proxy=True</code>) å¹¶é…ç½®æœ‰æ•ˆçš„ä»£ç†æ± ã€‚</li></ul></li><li><strong>æ—¥å¿—çº§åˆ«</strong>: é¡¹ç›®é…ç½®è¦æ±‚ï¼Œä¸€èˆ¬æƒ…å†µæ—¥å¿—ä½¿ç”¨ <code>debug</code> çº§åˆ«ï¼Œåªæœ‰æœ€é‡è¦çš„ä¿¡æ¯é‡‡ç”¨ <code>info</code> çº§åˆ«ã€‚é€šè¿‡ <code>self.logger.debug(...)</code> å’Œ <code>self.logger.info(...)</code> ä½¿ç”¨ã€‚</li><li><strong>é”™è¯¯å¤„ç†</strong>: åœ¨çˆ¬è™«é€»è¾‘ä¸­å¦¥å–„å¤„ç†ç½‘ç»œé”™è¯¯ã€å…ƒç´ æ‰¾ä¸åˆ°ã€è§£æé”™è¯¯ç­‰å¼‚å¸¸æƒ…å†µã€‚</li><li><strong>èµ„æºå…³é—­</strong>: ç¡®ä¿åœ¨çˆ¬è™«ä»»åŠ¡ç»“æŸåè°ƒç”¨ <code>await self.close()</code> æ¥æ­£ç¡®å…³é—­æµè§ˆå™¨å’Œé‡Šæ”¾ Playwright èµ„æºï¼Œé˜²æ­¢èµ„æºæ³„éœ²ã€‚</li><li><strong>å¼‚æ­¥ç¼–ç¨‹</strong>: çˆ¬è™«æ¨¡å—å¤§é‡ä½¿ç”¨ <code>asyncio</code> å’Œ <code>async/await</code> è¯­æ³•ï¼Œç¡®ä¿åœ¨è°ƒç”¨å¼‚æ­¥æ–¹æ³•æ—¶ä½¿ç”¨ <code>await</code>ï¼Œå¹¶é€šè¿‡ <code>asyncio.run()</code> æ¥æ‰§è¡Œé¡¶å±‚å¼‚æ­¥å‡½æ•°ã€‚</li><li><strong>é…ç½®æ–‡ä»¶æ•æ„Ÿä¿¡æ¯</strong>: ç¡®ä¿ <code>config.json</code> ä¸­çš„æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ tokenã€è´¦å·å¯†ç ï¼‰ä¸è¦æäº¤åˆ°å…¬å…±ä»£ç åº“ã€‚å¯ä»¥ä½¿ç”¨ <code>.gitignore</code> å¿½ç•¥è¯¥æ–‡ä»¶ï¼Œå¹¶é€šè¿‡ç¯å¢ƒå˜é‡æˆ–å…¶ä»–å®‰å…¨æ–¹å¼ç®¡ç†ç”Ÿäº§ç¯å¢ƒé…ç½®ã€‚</li></ul><h2 id="è°ƒè¯•æŠ€å·§" tabindex="-1"><a class="header-anchor" href="#è°ƒè¯•æŠ€å·§"><span>è°ƒè¯•æŠ€å·§</span></a></h2><ul><li><strong>è®¾ç½® <code>headless=False</code></strong>: åœ¨å¼€å‘åˆæœŸï¼Œå°† <code>headless</code> è®¾ç½®ä¸º <code>False</code> å¯ä»¥çœ‹åˆ°æµè§ˆå™¨ç•Œé¢çš„å®é™…æ“ä½œï¼Œæ–¹ä¾¿å®šä½é—®é¢˜ã€‚</li><li><strong>åˆ©ç”¨ <code>self.logger</code></strong>: åœ¨å…³é”®æ­¥éª¤æ‰“å°æ—¥å¿—ï¼Œäº†è§£æ‰§è¡Œæµç¨‹å’Œå˜é‡çŠ¶æ€ã€‚</li><li><strong>Playwright Inspector</strong>: Playwright æä¾›äº† Inspector å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©è°ƒè¯•å’Œç”Ÿæˆé€‰æ‹©å™¨ã€‚<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">PWDEBUG</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">1</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> python</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> etl.crawler.your_crawler</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><strong>é€æ­¥æ‰§è¡Œ</strong>: å°†å¤æ‚çš„çˆ¬å–æµç¨‹åˆ†è§£ä¸ºå°æ­¥éª¤ï¼Œé€ä¸ªæµ‹è¯•å’ŒéªŒè¯ã€‚</li><li><strong>æŸ¥çœ‹ <code>data/raw/</code> ç›®å½•</strong>: æ£€æŸ¥çˆ¬å–çš„æ•°æ®æ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œæ–‡ä»¶åå’Œå†…å®¹æ˜¯å¦æ­£ç¡®ã€‚</li></ul><h2 id="ç°æœ‰çˆ¬è™«æ¨¡å—ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#ç°æœ‰çˆ¬è™«æ¨¡å—ç®€ä»‹"><span>ç°æœ‰çˆ¬è™«æ¨¡å—ç®€ä»‹</span></a></h2><ul><li><code>wechat.py</code>: çˆ¬å–å¾®ä¿¡å…¬ä¼—å·æ–‡ç« ã€‚</li><li><code>market.py</code>: çˆ¬å–æ ¡å›­é›†å¸‚ï¼ˆäºŒæ‰‹äº¤æ˜“ã€æ´»åŠ¨ç­‰ï¼‰æ•°æ®ã€‚</li><li><code>sina_finance.py</code>: çˆ¬å–æ–°æµªè´¢ç»çš„ç›¸å…³æ•°æ®ã€‚</li><li><code>webpage_spider/</code>: åŒ…å«ä¸€ä¸ªæ›´é€šç”¨çš„ç½‘é¡µçˆ¬è™«æ¡†æ¶ï¼Œå¯ä»¥é…ç½®åŒ–åœ°çˆ¬å–æŒ‡å®šè§„åˆ™çš„ç½‘é¡µã€‚</li><li><code>xhs_spider/</code>, <code>douyin_spider/</code>: åˆ†åˆ«é’ˆå¯¹å°çº¢ä¹¦å’ŒæŠ–éŸ³å¹³å°çš„çˆ¬è™«ï¼ˆå…·ä½“å®ç°ç»†èŠ‚éœ€æŸ¥çœ‹ä»£ç ï¼‰ã€‚</li></ul><p>é€šè¿‡æœ¬æŒ‡å—ï¼Œå¸Œæœ›èƒ½å¸®åŠ©æ‚¨å¿«é€Ÿç†è§£å’Œä½¿ç”¨ <code>etl/crawler</code> æ¨¡å—ã€‚å¦‚æœ‰æ›´å¤æ‚çš„éœ€æ±‚æˆ–é‡åˆ°é—®é¢˜ï¼Œè¯·å‚è€ƒæ¨¡å—å†…çš„ <code>README.md</code> å’Œå…·ä½“çˆ¬è™«çš„æºä»£ç ã€‚</p></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/docs/database_guide.html" aria-label="æ•°æ®åº“æŒ‡å—" iconsizing="both"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->æ•°æ®åº“æŒ‡å—</div></a><a class="route-link auto-link next" href="/docs/docker_guide.html" aria-label="Docker ä½¿ç”¨æŒ‡å—" iconsizing="both"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">Docker ä½¿ç”¨æŒ‡å—<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">ç½‘ç«™å¤‡æ¡ˆå·ï¼š<a href='https://beian.miit.gov.cn/'>è¾½ICPå¤‡2025051633å·</a></div><div class="vp-copyright">Copyright Â© 2025 NKU-WIKI </div></footer></div><!--]--><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DWPKiBdg.js" defer></script>
  </body>
</html>
